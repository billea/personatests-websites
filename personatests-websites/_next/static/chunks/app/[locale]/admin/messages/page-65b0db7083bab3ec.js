(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[438],{2156:(e,s,t)=>{Promise.resolve().then(t.bind(t,8512))},5695:(e,s,t)=>{"use strict";var a=t(8999);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},7200:(e,s,t)=>{"use strict";t.d(s,{A:()=>d,AuthProvider:()=>u});var a=t(5155),n=t(2115),l=t(5404),r=t(5695),i=t(6104),o=t(9086);let c=(0,n.createContext)(void 0),d=()=>{let e=(0,n.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},u=e=>{let{children:s}=e,[t,d]=(0,n.useState)(null),[u,g]=(0,n.useState)(!0),m=(0,r.useRouter)();return(0,n.useEffect)(()=>{let e=(0,l.hg)(i.j,async e=>{if(e){if(!e.providerData.some(e=>"google.com"===e.providerId)&&!e.emailVerified){console.log("\uD83D\uDEA8 AuthProvider: Blocking unverified email user:",e.email),console.log("\uD83D\uDCE7 Email verification status:",e.emailVerified),await (0,l.CI)(i.j),d(null),g(!1);return}console.log("âœ… AuthProvider: User verified, proceeding:",e.email);try{await (0,o.sM)(e)}catch(e){console.warn("Firebase permissions issue - continuing without profile creation:",e)}if(!t&&e){let s=localStorage.getItem("auth_return_url"),t=localStorage.getItem("auth_return_context");if(s&&("feedback-360-test"===t||"couple-compatibility-test"===t)){localStorage.removeItem("auth_return_url"),localStorage.removeItem("auth_return_context"),console.log("User logged in, preparing greeting before ".concat(t));let a=s.match(/\/([a-z]{2})\//),n=a?a[1]:"en";setTimeout(()=>{m.push("/".concat(n,"/welcome?returnUrl=").concat(encodeURIComponent(s),"&context=").concat(t,"&userName=").concat(encodeURIComponent(e.displayName||e.email||"User")))},100)}}}d(e),g(!1)});return()=>e()},[t,m]),(0,a.jsx)(c.Provider,{value:{user:t,loading:u},children:!u&&s})}},7550:(e,s,t)=>{"use strict";t.d(s,{TranslationProvider:()=>c,B:()=>o});var a=t(5155),n=t(2115),l=t(5695);class r{async init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";console.log("\uD83D\uDE80 CACHE-FIX TranslationEngine v6-COMPATIBILITY-FIX-2025-10-04 init called with defaultLang:",e),await this.loadLanguage("en");let s=e||localStorage.getItem("selectedLanguage")||navigator.language.split("-")[0]||"en";console.log("TranslationEngine using language:",s),"en"!==s&&await this.loadLanguage(s),this.currentLanguage=s,this.applyAll(),this.observeDOMChanges()}async loadLanguage(e){try{let s="compatibility-fix-".concat(Date.now(),"-").concat(Math.random()),t="/translations/".concat(e,".json?v=").concat(s);console.log("\uD83D\uDE80 CACHE-BUST Loading language ".concat(e," from:"),t);let a=await fetch(t,{cache:"no-cache",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});if(!a.ok)throw Error("Failed to load ".concat(e,".json: ").concat(a.status," ").concat(a.statusText));let n=await a.json();this.translations[e]=n,console.log("Successfully loaded ".concat(e," with ").concat(Object.keys(n).length," top-level keys")),n.results&&n.results.dimensions&&console.log("\uD83D\uDD0D COMPATIBILITY KEYS CHECK:",{compatibilityExists:!!n.results.dimensions.compatibility,personalityExists:!!n.results.dimensions.personality,compatibilityValue:n.results.dimensions.compatibility,personalityValue:n.results.dimensions.personality})}catch(s){console.error("Error loading language ".concat(e,":"),s)}}async setLanguage(e){await this.loadLanguage(e),this.currentLanguage=e,localStorage.setItem("selectedLanguage",e),this.applyAll()}t(e){if("results.strengths"===e&&console.log("\uD83D\uDE80 NEW TRANSLATION ENGINE LOADED - v6-COMPATIBILITY-FIX-2025-10-04"),!this.translations[this.currentLanguage]&&!this.translations.en)return console.warn("Translation files not loaded yet for key: ".concat(e)),e;let s=e.split(".").reduce((e,s)=>null==e?void 0:e[s],this.translations[this.currentLanguage]);if(void 0===s&&void 0===(s=e.split(".").reduce((e,s)=>null==e?void 0:e[s],this.translations.en))){var t,a,n,l,r,i,o,c,d,u,g,m,h,x,p,y,v,b,f,j,N,w,L,E,D;console.log("\uD83D\uDD0D Translation missing for key: ".concat(e," in language: ").concat(this.currentLanguage)),console.log("\uD83D\uDD0D Available languages:",Object.keys(this.translations)),console.log("\uD83D\uDD0D Translation objects:",{currentLangExists:!!this.translations[this.currentLanguage],englishExists:!!this.translations.en,currentLangKeys:this.translations[this.currentLanguage]?Object.keys(this.translations[this.currentLanguage]):"none",englishKeys:this.translations.en?Object.keys(this.translations.en):"none"}),console.log("\uD83D\uDD0D FULL RESULTS OBJECT:",null==(t=this.translations.en)?void 0:t.results),console.log("\uD83D\uDD0D STRENGTHS KEY:",null==(n=this.translations.en)||null==(a=n.results)?void 0:a.strengths),console.log("\uD83D\uDD0D STRENGTH PREFIX KEY:",null==(r=this.translations.en)||null==(l=r.results)?void 0:l.strengthPrefix),e.includes("results.dimensions")&&(console.log("\uD83D\uDD0D DEBUG results.dimensions structure for key: ".concat(e,":"),{fullKey:e,keyParts:e.split("."),lastPart:e.split(".").pop(),currentLang:null==(i=this.translations[this.currentLanguage])?void 0:i.results,english:null==(o=this.translations.en)?void 0:o.results,dimensionsExist:!!(null==(d=this.translations.en)||null==(c=d.results)?void 0:c.dimensions),dimensionsKeys:Object.keys((null==(g=this.translations.en)||null==(u=g.results)?void 0:u.dimensions)||{}),specificKeyTest:null==(x=this.translations.en)||null==(h=x.results)||null==(m=h.dimensions)?void 0:m[e.split(".").pop()],fullLookupResult:e.split(".").reduce((e,s)=>null==e?void 0:e[s],this.translations.en),fullTranslationObj:this.translations.en}),("results.dimensions.compatibility"===e||"results.dimensions.personality"===e)&&console.log("\uD83D\uDEA8 COUPLE COMPATIBILITY KEY DEBUG for ".concat(e,":"),{translationsLoaded:!!this.translations.en,resultsExist:!!(null==(p=this.translations.en)?void 0:p.results),dimensionsExist:!!(null==(v=this.translations.en)||null==(y=v.results)?void 0:y.dimensions),compatibilityKey:null==(j=this.translations.en)||null==(f=j.results)||null==(b=f.dimensions)?void 0:b.compatibility,personalityKey:null==(L=this.translations.en)||null==(w=L.results)||null==(N=w.dimensions)?void 0:N.personality,allDimensionKeys:(null==(D=this.translations.en)||null==(E=D.results)?void 0:E.dimensions)?Object.keys(this.translations.en.results.dimensions):"none"}))}return s||e}getTranslations(){return this.translations[this.currentLanguage]||this.translations.en||{}}applyAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;e.querySelectorAll("[data-translate]").forEach(e=>{let s=e.getAttribute("data-translate");e.textContent=this.t(s)})}observeDOMChanges(){new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{1===e.nodeType&&this.applyAll(e)})})}).observe(document.body,{childList:!0,subtree:!0})}constructor(){this.translations={},this.currentLanguage="en"}}let i=(0,n.createContext)(null),o=()=>{let e=(0,n.useContext)(i);if(!e)throw Error("useTranslation must be used within a TranslationProvider");return{t:s=>{let t=e.t(s);return t===s&&console.warn("Translation missing for key: ".concat(s," in language: ").concat(e.currentLanguage)),t},setLanguage:e.setLanguage.bind(e),currentLanguage:e.currentLanguage,translations:e.getTranslations()}},c=e=>{let{children:s}=e,[t,o]=(0,n.useState)(null),[c,d]=(0,n.useState)(!1),[u,g]=(0,n.useState)(!1),[,m]=(0,n.useState)({}),h=(0,l.usePathname)();return((0,n.useEffect)(()=>{g(!0);let e=async()=>{let e=new r,s=h.split("/")[1],t=["en","ko","es","fr","de","it","ja","pt","zh"].includes(s)?s:"en";console.log("TranslationProvider initializing with language:",t,"from pathname:",h);let a=e.setLanguage.bind(e);e.setLanguage=async e=>{console.log("Changing language to:",e),await a(e),m({})},await e.init(t),console.log("Translation engine initialized. Current language:",e.currentLanguage),console.log("Available translations for current language:",Object.keys(e.translations[e.currentLanguage]||{})),console.log("Test translation - tests.page_title:",e.t("tests.page_title")),console.log("Test results.dimensions translation - E:",e.t("results.dimensions.E")),console.log("Test results.dimensions translation - 8:",e.t("results.dimensions.8")),console.log("Test results.dimensions translation - Self-Awareness:",e.t("results.dimensions.Self-Awareness")),o(e),d(!0)};d(!1),e()},[h]),u)?t&&c?(0,a.jsx)(i.Provider,{value:t,children:s}):(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-pulse text-gray-500",children:"Loading translations..."})}):null}},8512:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var a=t(5155),n=t(2115),l=t(7550),r=t(7200),i=t(9086);function o(){let{t:e,currentLanguage:s}=(0,l.B)(),{user:t,loading:o}=(0,r.A)(),[c,d]=(0,n.useState)([]),[u,g]=(0,n.useState)(!0),[m,h]=(0,n.useState)("all"),[x,p]=(0,n.useState)("all"),[y,v]=(0,n.useState)(""),[b,f]=(0,n.useState)(null),[j,N]=(0,n.useState)(!1),[w,L]=(0,n.useState)(""),[E,D]=(0,n.useState)(!1),[C,S]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{if(t&&!o)try{let e=await (0,i.N6)(t.uid);D(e),e&&T()}catch(e){console.error("Error checking admin role:",e),D(!1)}S(!1)})()},[t,o]);let T=async()=>{try{g(!0);let e=await (0,i.Kv)();d(e)}catch(e){console.error("Error loading messages:",e)}finally{g(!1)}},A=async(e,s,t)=>{try{N(!0),await (0,i.FQ)(e,s,t),await T(),f(null),L("")}catch(e){console.error("Error updating message status:",e)}finally{N(!1)}},k=async s=>{if(window.confirm(e("admin.messages.confirm_delete")||"Are you sure you want to delete this message?"))try{await (0,i.P7)(s),await T(),f(null)}catch(e){console.error("Error deleting message:",e)}},P=c.filter(e=>{let s="all"===m||e.status===m,t="all"===x||e.category===x,a=""===y||e.name.toLowerCase().includes(y.toLowerCase())||e.email.toLowerCase().includes(y.toLowerCase())||e.subject.toLowerCase().includes(y.toLowerCase())||e.message.toLowerCase().includes(y.toLowerCase());return s&&t&&a}),I=e=>{switch(e){case"new":return"bg-red-100 text-red-800";case"read":return"bg-yellow-100 text-yellow-800";case"resolved":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},_=e=>{switch(e){case"general":return"bg-blue-100 text-blue-800";case"technical":return"bg-purple-100 text-purple-800";case"feedback":return"bg-green-100 text-green-800";case"partnership":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},O=e=>{if(!e)return"";let s=e.toDate?e.toDate():new Date(e);return s.toLocaleDateString()+" "+s.toLocaleTimeString()};return o||C?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-gray-600",children:"Loading..."})}):t?E?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 max-w-7xl",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:e("admin.messages.title")||"Contact Messages"}),(0,a.jsx)("p",{className:"text-gray-600",children:e("admin.messages.subtitle")||"Manage and respond to user inquiries"})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("admin.messages.search")||"Search"}),(0,a.jsx)("input",{type:"text",value:y,onChange:e=>v(e.target.value),placeholder:e("admin.messages.search_placeholder")||"Search messages...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("admin.messages.status")||"Status"}),(0,a.jsxs)("select",{value:m,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,a.jsx)("option",{value:"all",children:e("admin.messages.all_statuses")||"All Statuses"}),(0,a.jsx)("option",{value:"new",children:e("admin.messages.new")||"New"}),(0,a.jsx)("option",{value:"read",children:e("admin.messages.read")||"Read"}),(0,a.jsx)("option",{value:"resolved",children:e("admin.messages.resolved")||"Resolved"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("admin.messages.category")||"Category"}),(0,a.jsxs)("select",{value:x,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,a.jsx)("option",{value:"all",children:e("admin.messages.all_categories")||"All Categories"}),(0,a.jsx)("option",{value:"general",children:e("contact.form.category_general")||"General Inquiry"}),(0,a.jsx)("option",{value:"technical",children:e("contact.form.category_technical")||"Technical Issue"}),(0,a.jsx)("option",{value:"feedback",children:e("contact.form.category_feedback")||"Feedback & Suggestions"}),(0,a.jsx)("option",{value:"partnership",children:e("contact.form.category_partnership")||"Partnership"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[e("admin.messages.total")||"Total",": ",c.length]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[e("admin.messages.filtered")||"Filtered",": ",P.length]})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,a.jsx)("div",{className:"p-4 border-b",children:(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:e("admin.messages.messages_list")||"Messages"})}),u?(0,a.jsx)("div",{className:"p-8 text-center text-gray-600",children:e("admin.messages.loading")||"Loading messages..."}):0===P.length?(0,a.jsx)("div",{className:"p-8 text-center text-gray-600",children:e("admin.messages.no_messages")||"No messages found"}):(0,a.jsx)("div",{className:"divide-y",children:P.map(e=>(0,a.jsxs)("div",{onClick:()=>f(e),className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors ".concat((null==b?void 0:b.id)===e.id?"bg-purple-50 border-l-4 border-l-purple-500":""),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(I(e.status)),children:e.status}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(_(e.category)),children:e.category})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:O(e.createdAt)})]}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.email})]}),(0,a.jsx)("div",{className:"font-medium text-gray-900 mb-1",children:e.subject}),(0,a.jsx)("div",{className:"text-sm text-gray-600 line-clamp-2",children:e.message})]},e.id))})]})}),(0,a.jsx)("div",{className:"lg:col-span-1",children:b?(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,a.jsx)("div",{className:"p-4 border-b",children:(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:e("admin.messages.message_details")||"Message Details"})}),(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("span",{className:"px-3 py-1 text-sm font-medium rounded-full ".concat(I(b.status)),children:b.status}),(0,a.jsx)("span",{className:"px-3 py-1 text-sm font-medium rounded-full ".concat(_(b.category)),children:b.category})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:b.name}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:b.email}),b.userEmail&&b.userEmail!==b.email&&(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["User: ",b.userEmail]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Subject"}),(0,a.jsx)("div",{className:"text-gray-900",children:b.subject})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Message"}),(0,a.jsx)("div",{className:"text-gray-900 bg-gray-50 p-3 rounded text-sm whitespace-pre-wrap",children:b.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Admin Notes"}),(0,a.jsx)("textarea",{value:w||b.adminNotes||"",onChange:e=>L(e.target.value),placeholder:"Add admin notes...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm",rows:3})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,a.jsxs)("div",{children:["Created: ",O(b.createdAt)]}),b.readAt&&(0,a.jsxs)("div",{children:["Read: ",O(b.readAt)]}),b.resolvedAt&&(0,a.jsxs)("div",{children:["Resolved: ",O(b.resolvedAt)]})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2 pt-4 border-t",children:["new"===b.status&&(0,a.jsx)("button",{onClick:()=>A(b.id,"read",w),disabled:j,className:"w-full px-3 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 disabled:opacity-50 text-sm",children:j?"Updating...":"Mark as Read"}),("new"===b.status||"read"===b.status)&&(0,a.jsx)("button",{onClick:()=>A(b.id,"resolved",w),disabled:j,className:"w-full px-3 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 text-sm",children:j?"Updating...":"Mark as Resolved"}),w&&w!==b.adminNotes&&(0,a.jsx)("button",{onClick:()=>A(b.id,b.status,w),disabled:j,className:"w-full px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 text-sm",children:j?"Updating...":"Save Notes"}),(0,a.jsx)("button",{onClick:()=>k(b.id),className:"w-full px-3 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm",children:"Delete Message"})]})]})]}):(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-8 text-center text-gray-500",children:e("admin.messages.select_message")||"Select a message to view details"})})]})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-sm border max-w-md w-full text-center",children:[(0,a.jsx)("div",{className:"text-red-600 text-6xl mb-4",children:"\uD83D\uDEAB"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:e("admin.access.denied")||"Access Denied"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:e("admin.access.admin_only")||"You need administrator privileges to access this page."})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-gray-600",children:"Please sign in to access admin features."})})}}},e=>{e.O(0,[135,965,155,761,86,441,964,358],()=>e(e.s=2156)),_N_E=e.O()}]);