(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[745],{134:(e,t,s)=>{Promise.resolve().then(s.bind(s,4367))},4367:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var n=s(5155),a=s(5695),l=s(2115),i=s(7550),r=s(3722);function o(){let{t:e,currentLanguage:t}=(0,i.B)(),s=(0,a.useSearchParams)(),o=s.get("invitationId")||"",c=s.get("token")||"",u="ko"===t,[d,h]=(0,l.useState)(null),[g,m]=(0,l.useState)(null),[x,b]=(0,l.useState)(!0),[f,p]=(0,l.useState)(null),[v,w]=(0,l.useState)(0),[N,j]=(0,l.useState)({}),[y,k]=(0,l.useState)(!1),[L,S]=(0,l.useState)(!1);(0,l.useEffect)(()=>{T()},[o,c]);let T=async()=>{try{let e=s.get("name"),t=s.get("testId"),n=s.get("testResultId"),a=s.get("email");if(!e||!t||!n||!a||!c||!o){p("Invalid invitation link - missing parameters"),b(!1);return}if(JSON.parse(localStorage.getItem("submitted_feedback")||"[]").some(e=>e.invitationId===o)){p("This feedback has already been submitted"),b(!1);return}let l={id:o,inviterName:e,testId:t,testResultId:n,participantEmail:a,status:"pending",invitationToken:c};h(l);let i=(0,r.tb)(l.testId);i?m(i):p("Test not found")}catch(e){p("Failed to load invitation")}finally{b(!1)}},D=e=>{if(!g)return;let t=g.questions[v],s={...N,[t.id]:e};j(s),v<g.questions.length-1?w(v+1):E(s)},E=async e=>{if(d&&g){k(!0);try{let t=g.scoring(e),s={invitationId:o,testId:d.testId,testResultId:d.testResultId,answers:e,result:t,submittedAt:new Date().toISOString(),aboutPerson:d.inviterName,token:c},n=JSON.parse(localStorage.getItem("submitted_feedback")||"[]");n.push(s),localStorage.setItem("submitted_feedback",JSON.stringify(n));let a="aggregated_feedback_"+d.testResultId,l=JSON.parse(localStorage.getItem(a)||"[]");l.push({result:t,submittedAt:s.submittedAt,feedbackId:o}),localStorage.setItem(a,JSON.stringify(l)),S(!0)}catch(e){p("Failed to submit feedback. Please try again.")}finally{k(!1)}}};if(x)return(0,n.jsx)("main",{className:"flex min-h-screen items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500 mx-auto"}),(0,n.jsx)("p",{className:"mt-4 text-lg",children:"Loading..."})]})});if(f)return(0,n.jsx)("main",{className:"flex min-h-screen items-center justify-center p-8",children:(0,n.jsxs)("div",{className:"text-center max-w-md",children:[(0,n.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Error"}),(0,n.jsx)("p",{className:"text-gray-600 mb-6",children:f}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"If you think this is a mistake, please contact the person who sent you this link."})]})});if(L)return(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-400 via-purple-500 to-purple-600 flex items-center justify-center p-8",children:(0,n.jsx)("div",{className:"w-full max-w-4xl",children:(0,n.jsxs)("div",{className:"text-center mb-8 p-8 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg shadow-lg",children:[(0,n.jsx)("div",{className:"text-green-400 text-6xl mb-6",children:"✅"}),(0,n.jsx)("h1",{className:"text-4xl font-bold mb-4 text-white",children:u?"감사합니다!":"Thank You!"}),(0,n.jsx)("p",{className:"text-lg text-white/90 mb-6",children:u?((null==d?void 0:d.inviterName)||"")+"님을 위한 피드백이 성공적으로 제출되었습니다.":"Your feedback for "+((null==d?void 0:d.inviterName)||"")+" has been successfully submitted."})]})})});if(y)return(0,n.jsx)("main",{className:"flex min-h-screen items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500 mx-auto"}),(0,n.jsx)("p",{className:"mt-4 text-lg",children:"Submitting..."})]})});if(!g||!d)return(0,n.jsx)("main",{className:"flex min-h-screen items-center justify-center",children:(0,n.jsx)("p",{children:"Loading..."})});let I=g.questions[v];return(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-400 via-purple-500 to-purple-600 flex items-center justify-center p-8",children:(0,n.jsxs)("div",{className:"w-full max-w-3xl",children:[(0,n.jsxs)("div",{className:"mb-8 text-center",children:[(0,n.jsxs)("div",{className:"mb-6 p-6 bg-gradient-to-br from-purple-500/30 to-pink-500/30 border border-purple-400/50 rounded-lg",children:[(0,n.jsxs)("h1",{className:"text-2xl font-bold text-white mb-4 text-center",children:["\uD83C\uDFAF ",u?"피드백 요청":"Feedback Request"]}),(0,n.jsx)("p",{className:"text-white/90 mb-6 text-lg text-center",children:u?d.inviterName+"님이 피드백을 요청했습니다":d.inviterName+" has asked for your feedback"})]}),(0,n.jsx)("div",{className:"w-full bg-white/20 backdrop-blur-sm rounded-full h-3 mb-2",children:(0,n.jsx)("div",{className:"bg-gradient-to-r from-yellow-300 to-orange-400 h-3 rounded-full transition-all duration-500",style:{width:(v+1)/g.questions.length*100+"%"}})}),(0,n.jsxs)("p",{className:"text-white/80 text-sm",children:["Question ",v+1," of ",g.questions.length]})]}),(0,n.jsxs)("div",{className:"p-8 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg shadow-lg",children:[(0,n.jsx)("h2",{className:"mb-6 text-xl font-semibold tracking-tight text-white",children:e(I.text_key)||I.text_key}),(0,n.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 mb-6 border border-white/20",children:(0,n.jsx)("p",{className:"text-sm text-white/90 font-medium",children:u?"이 질문에 답할 때 "+d.inviterName+"님을 생각해 주세요.":"Think about "+d.inviterName+" when answering this question."})}),"multiple_choice"===I.type&&I.options&&(0,n.jsx)("div",{className:"flex flex-col gap-3",children:I.options.map((t,s)=>(0,n.jsx)("button",{onClick:()=>D(t.value),className:"w-full p-4 text-left bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg hover:bg-white/30 transition-all duration-300 transform hover:scale-105 text-white",children:e(t.text_key)||t.text_key},s))}),"scale"===I.type&&I.scale&&(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex justify-between text-sm text-white/80",children:[(0,n.jsx)("span",{children:u?"전혀 그렇지 않다":"Not at all"}),(0,n.jsx)("span",{children:u?"매우 그렇다":"Always"})]}),(0,n.jsx)("div",{className:"flex justify-between gap-2",children:Array.from({length:I.scale.max-I.scale.min+1},(e,t)=>{let s=I.scale.min+t;return(0,n.jsx)("button",{onClick:()=>D(s),className:"flex-1 py-3 text-center bg-white/20 backdrop-blur-sm border border-white/30 rounded hover:bg-white/30 hover:scale-105 transition-all duration-300 text-white font-semibold",children:s},s)})})]})]}),(0,n.jsxs)("div",{className:"mt-8 flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,n.jsx)("div",{className:"flex gap-3",children:v>0&&(0,n.jsxs)("button",{onClick:()=>{v>0&&w(v-1)},className:"px-4 py-2 bg-white/10 backdrop-blur-sm border border-white/30 text-white rounded-lg hover:bg-white/20 transition-all duration-300",children:["← ",u?"이전":"Previous"]})}),(0,n.jsxs)("div",{className:"text-white/80 text-sm",children:["Question ",v+1," of ",g.questions.length]}),(0,n.jsx)("div",{className:"w-20"})]}),(0,n.jsxs)("div",{className:"mt-8 text-center bg-white/10 backdrop-blur-sm rounded-lg p-6 border border-white/20",children:[(0,n.jsxs)("div",{className:"flex items-center justify-center mb-3",children:[(0,n.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-500/80 flex items-center justify-center mr-3",children:(0,n.jsx)("span",{className:"text-white text-sm",children:"\uD83D\uDD12"})}),(0,n.jsx)("p",{className:"text-sm font-semibold text-white",children:u?"100% 익명 보장":"100% Anonymous Guarantee"})]}),(0,n.jsx)("p",{className:"text-sm text-white/80 leading-relaxed max-w-2xl mx-auto",children:u?"이 피드백은 완전히 익명입니다. "+d.inviterName+"님은 종합 결과만 볼 수 있으며 개별 응답이나 응답자가 누구인지는 알 수 없습니다.":"This feedback is completely anonymous. "+d.inviterName+" will see aggregated results but not individual responses or who provided them."})]})]})})}},5695:(e,t,s)=>{"use strict";var n=s(8999);s.o(n,"useParams")&&s.d(t,{useParams:function(){return n.useParams}}),s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(t,{useSearchParams:function(){return n.useSearchParams}})},7550:(e,t,s)=>{"use strict";s.d(t,{TranslationProvider:()=>c,B:()=>o});var n=s(5155),a=s(2115),l=s(5695);class i{async init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";console.log("TranslationEngine init called with defaultLang:",e),await this.loadLanguage("en");let t=e||localStorage.getItem("selectedLanguage")||navigator.language.split("-")[0]||"en";console.log("TranslationEngine using language:",t),"en"!==t&&await this.loadLanguage(t),this.currentLanguage=t,this.applyAll(),this.observeDOMChanges()}async loadLanguage(e){try{let t="/translations/".concat(e,".json?v=").concat(new Date().getTime());console.log("Loading language ".concat(e," from:"),t);let s=await fetch(t,{cache:"no-cache",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});if(!s.ok)throw Error("Failed to load ".concat(e,".json: ").concat(s.status," ").concat(s.statusText));let n=await s.json();this.translations[e]=n,console.log("Successfully loaded ".concat(e," with ").concat(Object.keys(n).length," top-level keys"))}catch(t){console.error("Error loading language ".concat(e,":"),t)}}async setLanguage(e){await this.loadLanguage(e),this.currentLanguage=e,localStorage.setItem("selectedLanguage",e),this.applyAll()}t(e){if("results.strengths"===e&&console.log("\uD83D\uDE80 NEW TRANSLATION ENGINE LOADED - v5-FINAL-FIX-2025-10-01"),!this.translations[this.currentLanguage]&&!this.translations.en)return console.warn("Translation files not loaded yet for key: ".concat(e)),e;let t=e.split(".").reduce((e,t)=>null==e?void 0:e[t],this.translations[this.currentLanguage]);if(void 0===t&&void 0===(t=e.split(".").reduce((e,t)=>null==e?void 0:e[t],this.translations.en))){var s,n,a,l,i,r,o,c,u,d,h,g,m,x;console.log("\uD83D\uDD0D Translation missing for key: ".concat(e," in language: ").concat(this.currentLanguage)),console.log("\uD83D\uDD0D Available languages:",Object.keys(this.translations)),console.log("\uD83D\uDD0D Translation objects:",{currentLangExists:!!this.translations[this.currentLanguage],englishExists:!!this.translations.en,currentLangKeys:this.translations[this.currentLanguage]?Object.keys(this.translations[this.currentLanguage]):"none",englishKeys:this.translations.en?Object.keys(this.translations.en):"none"}),console.log("\uD83D\uDD0D FULL RESULTS OBJECT:",null==(s=this.translations.en)?void 0:s.results),console.log("\uD83D\uDD0D STRENGTHS KEY:",null==(a=this.translations.en)||null==(n=a.results)?void 0:n.strengths),console.log("\uD83D\uDD0D STRENGTH PREFIX KEY:",null==(i=this.translations.en)||null==(l=i.results)?void 0:l.strengthPrefix),e.includes("results.dimensions")&&console.log("\uD83D\uDD0D DEBUG results.dimensions structure for key: ".concat(e,":"),{fullKey:e,keyParts:e.split("."),lastPart:e.split(".").pop(),currentLang:null==(r=this.translations[this.currentLanguage])?void 0:r.results,english:null==(o=this.translations.en)?void 0:o.results,dimensionsExist:!!(null==(u=this.translations.en)||null==(c=u.results)?void 0:c.dimensions),dimensionsKeys:Object.keys((null==(h=this.translations.en)||null==(d=h.results)?void 0:d.dimensions)||{}),specificKeyTest:null==(x=this.translations.en)||null==(m=x.results)||null==(g=m.dimensions)?void 0:g[e.split(".").pop()],fullLookupResult:e.split(".").reduce((e,t)=>null==e?void 0:e[t],this.translations.en)})}return t||e}getTranslations(){return this.translations[this.currentLanguage]||this.translations.en||{}}applyAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;e.querySelectorAll("[data-translate]").forEach(e=>{let t=e.getAttribute("data-translate");e.textContent=this.t(t)})}observeDOMChanges(){new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{1===e.nodeType&&this.applyAll(e)})})}).observe(document.body,{childList:!0,subtree:!0})}constructor(){this.translations={},this.currentLanguage="en"}}let r=(0,a.createContext)(null),o=()=>{let e=(0,a.useContext)(r);if(!e)throw Error("useTranslation must be used within a TranslationProvider");return{t:t=>{let s=e.t(t);return s===t&&console.warn("Translation missing for key: ".concat(t," in language: ").concat(e.currentLanguage)),s},setLanguage:e.setLanguage.bind(e),currentLanguage:e.currentLanguage,translations:e.getTranslations()}},c=e=>{let{children:t}=e,[s,o]=(0,a.useState)(null),[c,u]=(0,a.useState)(!1),[d,h]=(0,a.useState)(!1),[,g]=(0,a.useState)({}),m=(0,l.usePathname)();return((0,a.useEffect)(()=>{h(!0);let e=async()=>{let e=new i,t=m.split("/")[1],s=["en","ko","es","fr","de","it","ja","pt","zh"].includes(t)?t:"en";console.log("TranslationProvider initializing with language:",s,"from pathname:",m);let n=e.setLanguage.bind(e);e.setLanguage=async e=>{console.log("Changing language to:",e),await n(e),g({})},await e.init(s),console.log("Translation engine initialized. Current language:",e.currentLanguage),console.log("Available translations for current language:",Object.keys(e.translations[e.currentLanguage]||{})),console.log("Test translation - tests.page_title:",e.t("tests.page_title")),console.log("Test results.dimensions translation - E:",e.t("results.dimensions.E")),console.log("Test results.dimensions translation - 8:",e.t("results.dimensions.8")),console.log("Test results.dimensions translation - Self-Awareness:",e.t("results.dimensions.Self-Awareness")),o(e),u(!0)};u(!1),e()},[m]),d)?s&&c?(0,n.jsx)(r.Provider,{value:s,children:t}):(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,n.jsx)("div",{className:"animate-pulse text-gray-500",children:"Loading translations..."})}):null}}},e=>{e.O(0,[722,441,964,358],()=>e(e.s=134)),_N_E=e.O()}]);