(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[89],{543:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>o});var t=a(5155),r=a(7550),l=a(7200),n=a(6874),i=a.n(n),d=a(2115),c=a(9086);function o(){let{t:e,currentLanguage:s}=(0,r.B)(),{user:a,loading:n}=(0,l.A)(),[o,m]=(0,d.useState)({total:0,new:0,read:0,resolved:0}),[x,h]=(0,d.useState)(!1),[g,u]=(0,d.useState)(!0),[j,p]=(0,d.useState)([]),[v,b]=(0,d.useState)(!0);(0,d.useEffect)(()=>{(async()=>{if(a&&!n)try{let e=await (0,c.N6)(a.uid);h(e),e&&(f(),N())}catch(e){console.error("Error checking admin role:",e),h(!1)}u(!1)})()},[a,n]);let f=async()=>{try{let[e,s,a,t]=await Promise.allSettled([(0,c.Kv)(),(0,c.C3)("new"),(0,c.C3)("read"),(0,c.C3)("resolved")]);m({total:"fulfilled"===e.status?e.value.length:0,new:"fulfilled"===s.status?s.value.length:0,read:"fulfilled"===a.status?a.value.length:0,resolved:"fulfilled"===t.status?t.value.length:0})}catch(e){console.error("Error loading message stats:",e)}},N=async()=>{try{b(!0);let e=await (0,c.m6)();0===e.length&&(await (0,c.cp)(),e=await (0,c.m6)()),p(e)}catch(e){console.error("Error loading language configs:",e)}finally{b(!1)}},w=async(e,s)=>{try{await (0,c.eg)(e,{isEnabled:s}),await N()}catch(e){console.error("Error updating language config:",e)}};return n||g?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-gray-600",children:"Loading..."})}):a?x?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 max-w-4xl",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:e("admin.dashboard.title")||"Admin Dashboard"}),(0,t.jsx)("p",{className:"text-gray-600",children:e("admin.dashboard.subtitle")||"Manage your personality testing platform"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,t.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:o.total}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Total Messages"})]})]})}),(0,t.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:o.new}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"New Messages"})]})]})}),(0,t.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,t.jsxs)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:o.read}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Read Messages"})]})]})}),(0,t.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:o.resolved}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Resolved Messages"})]})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[(0,t.jsx)("div",{className:"p-3 bg-purple-100 rounded-lg",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:e("admin.dashboard.messages_title")||"Contact Messages"}),(0,t.jsx)("p",{className:"text-gray-600",children:e("admin.dashboard.messages_desc")||"Manage user inquiries and feedback"})]})]}),(0,t.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Total Messages"}),(0,t.jsx)("span",{className:"font-medium",children:o.total})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,t.jsx)("span",{className:"text-red-600",children:"⭕ New"}),(0,t.jsx)("span",{className:"font-medium text-red-600",children:o.new})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,t.jsx)("span",{className:"text-yellow-600",children:"\uD83D\uDC41️ Read"}),(0,t.jsx)("span",{className:"font-medium text-yellow-600",children:o.read})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,t.jsx)("span",{className:"text-green-600",children:"✅ Resolved"}),(0,t.jsx)("span",{className:"font-medium text-green-600",children:o.resolved})]})]}),(0,t.jsx)(i(),{href:"/".concat(s,"/admin/messages"),className:"w-full bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors text-center block",children:e("admin.dashboard.manage_messages")||"Manage Messages"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[(0,t.jsx)("div",{className:"p-3 bg-orange-100 rounded-lg",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:e("admin.dashboard.questions_title")||"Question Management"}),(0,t.jsx)("p",{className:"text-gray-600",children:e("admin.dashboard.questions_desc")||"Manage test questions and content"})]})]}),(0,t.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:e("admin.dashboard.questions_features")||"Features:"}),(0,t.jsxs)("ul",{className:"text-sm space-y-1 text-gray-600 ml-4",children:[(0,t.jsx)("li",{children:"• Add new test questions"}),(0,t.jsx)("li",{children:"• Edit existing questions"}),(0,t.jsx)("li",{children:"• Manage question categories"}),(0,t.jsx)("li",{children:"• Translation management"})]})]}),(0,t.jsx)(i(),{href:"/".concat(s,"/admin/questions"),className:"w-full bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors text-center block",children:e("admin.dashboard.manage_questions")||"Manage Questions"})]})]}),(0,t.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-sm border p-6",children:[(0,t.jsxs)("div",{className:"flex items-center mb-6",children:[(0,t.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:e("admin.dashboard.languages_title")||"Language Management"}),(0,t.jsx)("p",{className:"text-gray-600",children:e("admin.dashboard.languages_desc")||"Control which languages are available to users"})]})]}),v?(0,t.jsx)("div",{className:"text-center py-4",children:(0,t.jsx)("div",{className:"text-gray-600",children:"Loading language configurations..."})}):(0,t.jsxs)("div",{className:"space-y-3",children:[j.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border-2 transition-colors ".concat(e.isEnabled?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50"),children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("span",{className:"text-2xl",children:e.flag}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:[e.code.toUpperCase()," • ",e.completionPercentage,"% complete",e.isDefault&&(0,t.jsx)("span",{className:"ml-2 px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:"Default"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"text-sm font-medium ".concat(e.isEnabled?"text-green-600":"text-gray-500"),children:e.isEnabled?"Available":"Disabled"}),!e.isDefault&&(0,t.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:e.isEnabled,onChange:s=>w(e.id,s.target.checked),className:"sr-only peer"}),(0,t.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]},e.id)),(0,t.jsx)("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)("div",{className:"text-blue-600 mt-0.5",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("div",{className:"font-medium text-blue-900 mb-1",children:"Language Launch Strategy"}),(0,t.jsx)("div",{className:"text-blue-700",children:"Start with English only for initial launch. Enable other languages after thorough testing. Completion percentages show translation readiness."})]})]})})]})]}),(0,t.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-sm border p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:e("admin.dashboard.quick_actions")||"Quick Actions"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)(i(),{href:"/".concat(s,"/admin/messages?filter=new"),className:"flex items-center p-3 bg-red-50 text-red-700 rounded-lg hover:bg-red-100 transition-colors",children:[(0,t.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"View New Messages (",o.new,")"]}),(0,t.jsxs)(i(),{href:"/".concat(s,"/tests"),className:"flex items-center p-3 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors",children:[(0,t.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"View Tests"]}),(0,t.jsxs)(i(),{href:"/".concat(s,"/contact"),className:"flex items-center p-3 bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition-colors",children:[(0,t.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Contact Form"]})]})]})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-sm border max-w-md w-full text-center",children:[(0,t.jsx)("div",{className:"text-red-600 text-6xl mb-4",children:"\uD83D\uDEAB"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:e("admin.access.denied")||"Access Denied"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:e("admin.access.admin_only")||"You need administrator privileges to access this page."}),(0,t.jsx)(i(),{href:"/".concat(s),className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"ko"===s?"홈으로":"Go Home"})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-sm border max-w-md w-full text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:e("admin.access.required")||"Admin Access Required"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:e("admin.access.privileges")||"You need admin privileges to access this page."}),(0,t.jsx)(i(),{href:"/".concat(s,"/auth"),className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"ko"===s?"로그인":"Sign In"})]})})}},7200:(e,s,a)=>{"use strict";a.d(s,{A:()=>o,AuthProvider:()=>m});var t=a(5155),r=a(2115),l=a(5404),n=a(5695),i=a(6104),d=a(9086);let c=(0,r.createContext)(void 0),o=()=>{let e=(0,r.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},m=e=>{let{children:s}=e,[a,o]=(0,r.useState)(null),[m,x]=(0,r.useState)(!0),h=(0,n.useRouter)();return(0,r.useEffect)(()=>{let e=(0,l.hg)(i.j,async e=>{if(e){if(!e.providerData.some(e=>"google.com"===e.providerId)&&!e.emailVerified){console.log("\uD83D\uDEA8 AuthProvider: Blocking unverified email user:",e.email),console.log("\uD83D\uDCE7 Email verification status:",e.emailVerified),await (0,l.CI)(i.j),o(null),x(!1);return}console.log("✅ AuthProvider: User verified, proceeding:",e.email);try{await (0,d.sM)(e)}catch(e){console.warn("Firebase permissions issue - continuing without profile creation:",e)}if(!a&&e){let s=localStorage.getItem("auth_return_url"),a=localStorage.getItem("auth_return_context");if(s&&("feedback-360-test"===a||"couple-compatibility-test"===a)){localStorage.removeItem("auth_return_url"),localStorage.removeItem("auth_return_context"),console.log("User logged in, preparing greeting before ".concat(a));let t=s.match(/\/([a-z]{2})\//),r=t?t[1]:"en";setTimeout(()=>{h.push("/".concat(r,"/welcome?returnUrl=").concat(encodeURIComponent(s),"&context=").concat(a,"&userName=").concat(encodeURIComponent(e.displayName||e.email||"User")))},100)}}}o(e),x(!1)});return()=>e()},[a,h]),(0,t.jsx)(c.Provider,{value:{user:a,loading:m},children:!m&&s})}},9910:(e,s,a)=>{Promise.resolve().then(a.bind(a,543))}},e=>{e.O(0,[135,965,155,761,244,550,86,441,964,358],()=>e(e.s=9910)),_N_E=e.O()}]);