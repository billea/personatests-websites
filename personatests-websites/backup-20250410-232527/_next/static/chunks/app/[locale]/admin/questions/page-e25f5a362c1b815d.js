(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[615],{4255:(e,t,s)=>{Promise.resolve().then(s.bind(s,4898))},4898:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(5155),l=s(2115),o=s(7200),r=s(9086);let i={"general-knowledge":{title:"General Knowledge",uploadFileName:"100-questions.json",categories:["science","history","geography","arts","sports","technology","mathematics"]},"math-speed":{title:"Math Speed",uploadFileName:"math-speed-questions.json",categories:["arithmetic","word_problem","sequence","geometry","algebra"]},"memory-power":{title:"Memory Power",uploadFileName:"memory-power-questions.json",categories:["word_sequence","number_sequence","image_sequence","pattern_sequence"]}};function n(){let{user:e}=(0,o.A)(),t=(0,l.useRef)(null),[s,n]=(0,l.useState)("general-knowledge"),[c,d]=(0,l.useState)(null),[u,m]=(0,l.useState)([]),[h,x]=(0,l.useState)(!1),[g,b]=(0,l.useState)(""),[p,w]=(0,l.useState)("upload"),[f,j]=(0,l.useState)(new Set),[v,N]=(0,l.useState)(null),[y,D]=(0,l.useState)({category:"",difficulty:""});(0,l.useEffect)(()=>{k(),C(),j(new Set),N(null)},[s]);let k=async()=>{try{let e;switch(s){case"general-knowledge":e=await (0,r.OR)();break;case"math-speed":e=await (0,r.J1)();break;case"memory-power":e=await (0,r.g3)()}d(e)}catch(e){console.error("Error loading ".concat(s," stats:"),e)}},C=async()=>{try{let e;switch(x(!0),b("\uD83D\uDD0D Loading ".concat(s," questions...")),console.log("\uD83D\uDD0D Loading questions for: ".concat(s),{filters:y}),s){case"general-knowledge":let t=await (0,r.v4)(100,null,y.category,y.difficulty);e=t.questions,console.log("\uD83D\uDCCB Loaded ".concat(e.length," general knowledge questions:"),t);break;case"math-speed":let a=await (0,r.K4)(100,null,y.category,y.difficulty);e=a.questions,console.log("\uD83D\uDCCB Loaded ".concat(e.length," math speed questions:"),a);break;case"memory-power":let l=await (0,r.Rh)(100,null,y.category,y.difficulty);e=l.questions,console.log("\uD83D\uDCCB Loaded ".concat(e.length," memory power questions:"),l)}m(e||[]),b("")}catch(e){console.error("Error loading ".concat(s," questions:"),e),b("❌ Error loading ".concat(s," questions: ").concat(e instanceof Error?e.message:"Unknown error")),m([])}finally{x(!1)}},q=async e=>{var a;let l=null==(a=e.target.files)?void 0:a[0];if(l){x(!0),b("\uD83D\uDCE4 Processing file upload...");try{let e,t=await l.text(),a=JSON.parse(t);if(!Array.isArray(a))throw Error("File must contain an array of questions");switch(b("\uD83D\uDCCA Loaded ".concat(a.length," questions from file, uploading to database...")),s){case"general-knowledge":e=await (0,r.KG)(a);break;case"math-speed":e=await (0,r.mc)(a);break;case"memory-power":e=await (0,r.ji)(a)}b("✅ Upload complete: ".concat(e.message)),k(),C()}catch(t){let e=t instanceof Error?t.message:"Unknown error";b("❌ File upload error: ".concat(e))}finally{x(!1),t.current&&(t.current.value="")}}},A=async()=>{let e=i[s].uploadFileName;x(!0),b("\uD83D\uDE80 Loading ".concat(e,"..."));try{let t,a=await fetch("/".concat(e));if(!a.ok)throw Error("Failed to fetch ".concat(e,": ").concat(a.status," ").concat(a.statusText));let l=await a.json();switch(console.log("\uD83D\uDCCA Loaded ".concat(l.length," questions from ").concat(e)),b("\uD83D\uDCCA Loaded ".concat(l.length," questions, uploading to database...")),s){case"general-knowledge":t=await (0,r.KG)(l);break;case"math-speed":t=await (0,r.mc)(l);break;case"memory-power":t=await (0,r.ji)(l)}b("✅ Success: ".concat(t.message)),k(),C()}catch(s){let t=s instanceof Error?s.message:"Unknown error";b("❌ Error uploading ".concat(e,": ").concat(t))}x(!1)},S=async()=>{if(0!==f.size&&confirm("Delete ".concat(f.size," selected questions?"))){x(!0);try{let e,t=Array.from(f);switch(s){case"general-knowledge":e=await (0,r.bE)(t);break;case"math-speed":e=await (0,r.ys)(t);break;case"memory-power":e=await (0,r.J7)(t)}b("✅ ".concat(e.message)),j(new Set),k(),C()}catch(e){b("❌ Error deleting questions: ".concat(e))}finally{x(!1)}}},E=async()=>{if(confirm("⚠️ WARNING: This will permanently delete ALL ".concat(L.title.toLowerCase()," questions from the database. This action cannot be undone. Are you sure?"))&&confirm("\uD83D\uDEA8 FINAL CONFIRMATION: Delete ALL ".concat((null==c?void 0:c.total)||0," ").concat(L.title.toLowerCase()," questions permanently?"))){x(!0);try{let e;switch(s){case"general-knowledge":e=await (0,r.cs)();break;case"math-speed":e=await (0,r.jI)();break;case"memory-power":e=await (0,r.Yd)()}b("✅ ".concat(e.message)),j(new Set),k(),C()}catch(e){b("❌ Error clearing all questions: ".concat(e))}finally{x(!1)}}},L=i[s];return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-400 via-purple-500 to-purple-600 p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-8 text-center",children:"\uD83D\uDD27 Questions Admin Panel"}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("div",{className:"flex space-x-4 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg p-2",children:Object.entries(i).map(e=>{let[t,l]=e;return(0,a.jsx)("button",{onClick:()=>n(t),className:"px-6 py-3 rounded-md font-semibold transition-all duration-200 ".concat(s===t?"bg-white text-purple-600 shadow-lg":"text-white hover:bg-white/10"),children:l.title},t)})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-white/80 text-sm font-medium",children:"Total Questions"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:(null==c?void 0:c.total)||0})]}),(0,a.jsxs)("div",{className:"bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-white/80 text-sm font-medium",children:"Active Questions"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:(null==c?void 0:c.active)||0})]}),(0,a.jsxs)("div",{className:"bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-white/80 text-sm font-medium",children:"Categories"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:Object.keys((null==c?void 0:c.byCategory)||{}).length})]}),(0,a.jsxs)("div",{className:"bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-white/80 text-sm font-medium",children:"Selected Type"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-white",children:L.title})]})]}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)("div",{className:"flex space-x-4 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg p-2",children:["upload","manage","add"].map(e=>(0,a.jsxs)("button",{onClick:()=>w(e),className:"px-6 py-3 rounded-md font-semibold transition-all duration-200 capitalize ".concat(p===e?"bg-white text-purple-600 shadow-lg":"text-white hover:bg-white/10"),children:[e," Questions"]},e))})}),g&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg",children:(0,a.jsx)("p",{className:"text-white",children:g})}),"upload"===p&&(0,a.jsxs)("div",{className:"bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg p-8",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6",children:["\uD83D\uDCE4 Upload ",L.title," Questions"]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Predefined Questions Database"}),(0,a.jsx)("button",{onClick:A,disabled:h,className:"px-6 py-3 bg-green-500/80 hover:bg-green-600 disabled:bg-green-500/40 text-white rounded-lg transition-all duration-200 font-semibold mr-4",children:h?"⏳ Uploading...":"\uD83D\uDCE4 Upload ".concat(L.uploadFileName)}),(0,a.jsxs)("p",{className:"text-white/80 text-sm mt-2",children:["Upload the predefined ",L.title.toLowerCase()," questions from the public directory"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Custom JSON File Upload"}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsx)("input",{ref:t,type:"file",accept:".json",onChange:q,disabled:h,className:"block w-full text-white file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-white/20 file:text-white hover:file:bg-white/30 file:disabled:bg-white/10"})}),(0,a.jsxs)("p",{className:"text-white/80 text-sm mt-2",children:["Upload a JSON file containing ",L.title.toLowerCase()," questions with proper structure"]})]})]}),"manage"===p&&(0,a.jsxs)("div",{className:"bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg p-8",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6",children:["\uD83D\uDCCB Manage ",L.title," Questions"]}),(0,a.jsxs)("div",{className:"mb-6 flex space-x-4",children:[(0,a.jsxs)("select",{value:y.category,onChange:e=>D({...y,category:e.target.value}),className:"px-4 py-2 bg-white/20 border border-white/30 rounded-lg text-white",children:[(0,a.jsx)("option",{value:"",children:"All Categories"}),L.categories.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{value:y.difficulty,onChange:e=>D({...y,difficulty:e.target.value}),className:"px-4 py-2 bg-white/20 border border-white/30 rounded-lg text-white",children:[(0,a.jsx)("option",{value:"",children:"All Difficulties"}),(0,a.jsx)("option",{value:"easy",children:"Easy"}),(0,a.jsx)("option",{value:"medium",children:"Medium"}),(0,a.jsx)("option",{value:"hard",children:"Hard"})]}),(0,a.jsx)("button",{onClick:C,className:"px-4 py-2 bg-blue-500/80 hover:bg-blue-600 text-white rounded-lg",children:"Apply Filters"})]}),(0,a.jsxs)("div",{className:"mb-6 flex flex-wrap gap-4",children:[f.size>0&&(0,a.jsxs)("div",{className:"p-4 bg-red-500/20 border border-red-400/30 rounded-lg",children:[(0,a.jsxs)("p",{className:"text-white mb-2",children:[f.size," questions selected"]}),(0,a.jsx)("button",{onClick:S,disabled:h,className:"px-4 py-2 bg-red-500/80 hover:bg-red-600 disabled:bg-red-500/40 text-white rounded-lg",children:"\uD83D\uDDD1️ Delete Selected"})]}),(0,a.jsxs)("div",{className:"p-4 bg-red-600/30 border border-red-500/50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-white mb-2 font-semibold",children:"⚠️ Danger Zone"}),(0,a.jsxs)("button",{onClick:E,disabled:h||0===((null==c?void 0:c.total)||0),className:"px-4 py-2 bg-red-600/80 hover:bg-red-700 disabled:bg-red-600/40 text-white rounded-lg font-semibold",children:["\uD83E\uDDF9 Clear All (",(null==c?void 0:c.total)||0,")"]})]})]}),(0,a.jsx)("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:h?(0,a.jsx)("p",{className:"text-white text-center",children:"Loading questions..."}):0===u.length?(0,a.jsx)("p",{className:"text-white text-center",children:"No questions found"}):u.map(e=>{var t,l,o,r,i,n,c;return(0,a.jsx)("div",{className:"p-4 bg-white/10 border border-white/20 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:f.has(e.id),onChange:()=>(e=>{let t=new Set(f);t.has(e)?t.delete(e):t.add(e),j(t)})(e.id),className:"rounded"}),(0,a.jsx)("span",{className:"text-xs bg-blue-500/50 px-2 py-1 rounded text-white",children:e.category}),(0,a.jsx)("span",{className:"text-xs bg-green-500/50 px-2 py-1 rounded text-white",children:e.difficulty})]}),(0,a.jsx)("p",{className:"text-white font-medium mb-2",children:(null==(l=e.translations)||null==(t=l.en)?void 0:t.question)||(null==(r=e.translations)||null==(o=r[e.defaultLanguage])?void 0:o.question)||"No question text"}),("math-speed"===s||"general-knowledge"===s||"memory-power"===s)&&(0,a.jsx)("div",{className:"text-sm text-white/80 mb-2 ml-4",children:(null==(n=e.translations)||null==(i=n.en)?void 0:i.options)&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{children:["A: ",e.translations.en.options.a]}),(0,a.jsxs)("div",{children:["B: ",e.translations.en.options.b]}),(0,a.jsxs)("div",{children:["C: ",e.translations.en.options.c]}),(0,a.jsxs)("div",{children:["D: ",e.translations.en.options.d]})]})}),(0,a.jsxs)("div",{className:"text-sm text-white/70",children:[(0,a.jsxs)("span",{className:"font-semibold text-green-300",children:["Answer: ",e.correctAnswer]})," | Languages: ",(null==(c=e.availableLanguages)?void 0:c.join(", "))||"Unknown"]})]}),(0,a.jsx)("div",{className:"flex space-x-2",children:(0,a.jsx)("button",{onClick:()=>N(e),className:"px-3 py-1 bg-blue-500/80 hover:bg-blue-600 text-white text-sm rounded",children:"Edit"})})]})},e.id)})})]}),"add"===p&&(0,a.jsxs)("div",{className:"bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg p-8",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6",children:["➕ Add New ",L.title," Question"]}),(0,a.jsx)("p",{className:"text-white/80 mb-4",children:"Individual question creation coming soon. Use the upload feature to add questions in bulk."})]})]})})}},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},7200:(e,t,s)=>{"use strict";s.d(t,{A:()=>d,AuthProvider:()=>u});var a=s(5155),l=s(2115),o=s(5404),r=s(5695),i=s(6104),n=s(9086);let c=(0,l.createContext)(void 0),d=()=>{let e=(0,l.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},u=e=>{let{children:t}=e,[s,d]=(0,l.useState)(null),[u,m]=(0,l.useState)(!0),h=(0,r.useRouter)();return(0,l.useEffect)(()=>{let e=(0,o.hg)(i.j,async e=>{if(e){if(!e.providerData.some(e=>"google.com"===e.providerId)&&!e.emailVerified){console.log("\uD83D\uDEA8 AuthProvider: Blocking unverified email user:",e.email),console.log("\uD83D\uDCE7 Email verification status:",e.emailVerified),await (0,o.CI)(i.j),d(null),m(!1);return}console.log("✅ AuthProvider: User verified, proceeding:",e.email);try{await (0,n.sM)(e)}catch(e){console.warn("Firebase permissions issue - continuing without profile creation:",e)}if(!s&&e){let t=localStorage.getItem("auth_return_url"),s=localStorage.getItem("auth_return_context");if(t&&("feedback-360-test"===s||"couple-compatibility-test"===s)){localStorage.removeItem("auth_return_url"),localStorage.removeItem("auth_return_context"),console.log("User logged in, preparing greeting before ".concat(s));let a=t.match(/\/([a-z]{2})\//),l=a?a[1]:"en";setTimeout(()=>{h.push("/".concat(l,"/welcome?returnUrl=").concat(encodeURIComponent(t),"&context=").concat(s,"&userName=").concat(encodeURIComponent(e.displayName||e.email||"User")))},100)}}}d(e),m(!1)});return()=>e()},[s,h]),(0,a.jsx)(c.Provider,{value:{user:s,loading:u},children:!u&&t})}}},e=>{e.O(0,[135,965,155,761,86,441,964,358],()=>e(e.s=4255)),_N_E=e.O()}]);