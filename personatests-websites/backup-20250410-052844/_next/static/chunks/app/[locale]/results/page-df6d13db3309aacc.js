(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[72],{4818:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var l=s(5155),i=s(7200),o=s(7550),a=s(2115),n=s(6874),r=s.n(n),c=s(9086),d=s(3722);function u(){let{user:e,loading:t}=(0,i.A)(),{t:s,currentLanguage:n}=(0,o.B)(),[u,p]=(0,a.useState)([]),[m,h]=(0,a.useState)([]),[x,g]=(0,a.useState)({}),[b,y]=(0,a.useState)([]),[f,w]=(0,a.useState)(!0),[v,j]=(0,a.useState)(null),[_,N]=(0,a.useState)(!1),[D,k]=(0,a.useState)(new Set),[C,q]=(0,a.useState)(new Set),[A,S]=(0,a.useState)(null);(0,a.useEffect)(()=>{e&&!t?E():t||w(!1)},[e,t]);let L=async e=>{try{let t={};await Promise.all(e.map(async e=>{if(e.id)try{let s=await (0,c.MC)(e.id);t[e.id]=s}catch(e){}})),g(t)}catch(e){}},E=async()=>{if(e)try{let[t,s,l]=await Promise.allSettled([(0,c.iZ)(e.uid),(0,c.Gb)(e.uid),(0,c.getCoupleCompatibilityResultsByEmail)(e.email||"")]),i="fulfilled"===t.status?t.value:[],o="fulfilled"===s.status?s.value:[],a="fulfilled"===l.status?l.value:[],n=[];try{let t="couple_result_".concat(e.email),s=localStorage.getItem(t);if(s){let e=JSON.parse(s);n.push(e)}}catch(e){}let r=[...a,...n];p(i),h(o),y(r),console.log("\uD83D\uDD0D ALL RESULTS DEBUG - Total results:",i.length),console.log("\uD83D\uDD0D ALL RESULTS DEBUG - Test IDs found:",i.map(e=>e.testId));let d=i.filter(e=>"memory-power"===e.testId);console.log("\uD83D\uDD0D MEMORY POWER RESULTS - Found:",d.length,"results"),d.forEach((e,t)=>{var s,l,i,o,a,n,r;console.log("\uD83D\uDD0D MEMORY POWER RESULT ".concat(t+1,":"),{id:e.id,testId:e.testId,hasResultPayload:!!e.resultPayload,resultPayloadType:typeof e.resultPayload,resultPayloadKeys:e.resultPayload?Object.keys(e.resultPayload):"none",hasScores:!!(null==(s=e.resultPayload)?void 0:s.scores),hasCorrectAnswers:!!(null==(i=e.resultPayload)||null==(l=i.scores)?void 0:l.correctAnswers),correctAnswersLength:(null==(n=e.resultPayload)||null==(a=n.scores)||null==(o=a.correctAnswers)?void 0:o.length)||0,createdAt:e.createdAt}),e.resultPayload&&(null==(r=e.resultPayload.scores)?void 0:r.correctAnswers)&&console.log("\uD83D\uDD0D MEMORY POWER CORRECT ANSWERS:",e.resultPayload.scores.correctAnswers)}),setTimeout(()=>{L(i)},100)}catch(e){}finally{w(!1)}},T=e=>e?(e.toDate?e.toDate():new Date(e)).toLocaleDateString(n,{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown date",R=async t=>{if(e)try{q(e=>new Set([...e,t]));let s=await (0,c.zG)(t,e.uid);s.success?(p(e=>e.filter(e=>e.id!==t)),v===t&&j(null),console.log("✅ Test result deleted successfully")):(console.error("❌ Failed to delete test result:",s.message),alert("Failed to delete test result. Please try again."))}catch(e){console.error("❌ Error deleting test result:",e),alert("Failed to delete test result. Please try again.")}finally{q(e=>{let s=new Set(e);return s.delete(t),s}),S(null)}},P=e=>{let t=(0,d.tb)(e);return t?s(t.title_key)||t.title_key:e},I=(e,t)=>{var l,i;let o=P(e.testId),a=null==(l=e.resultPayload)?void 0:l.result,r="https://korean-mbti-platform.netlify.app/".concat(n,"/tests/").concat(e.testId),c="I just completed the ".concat(o," personality test!");switch((null==a?void 0:a.type)&&(c+=" My result: ".concat(a.type)),(null==a||null==(i=a.scores)?void 0:i.compatibility)&&(c+=" (".concat(a.scores.compatibility,"% compatibility)")),c+=" \uD83E\uDDE0✨",t){case"copy":let d="".concat(c,"\n\nTake the test yourself: ").concat(r);navigator.clipboard.writeText(d).then(()=>{alert(s("share.copied")||"Result link copied to clipboard!")}).catch(()=>{alert("Failed to copy to clipboard")});break;case"twitter":let u=encodeURIComponent("".concat(c,"\n\nTake the test: ").concat(r));window.open("https://twitter.com/intent/tweet?text=".concat(u),"_blank");break;case"facebook":window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(r)),"_blank");break;case"linkedin":encodeURIComponent(c),window.open("https://www.linkedin.com/sharing/share-offsite/?url=".concat(encodeURIComponent(r)),"_blank");break;case"whatsapp":let p=encodeURIComponent("".concat(c,"\n\nTake the test: ").concat(r));window.open("https://wa.me/?text=".concat(p),"_blank");break;case"download":O(e)}},O=e=>{var t,s;let l=P(e.testId),i=null==(t=e.resultPayload)?void 0:t.result,o=null==(s=e.resultPayload)?void 0:s.answers,a="=== ".concat(l," Results ===\n");a+="Completed: ".concat(T(e.createdAt),"\n"),a+="Test ID: ".concat(e.testId,"\n\n"),(null==i?void 0:i.type)&&(a+="Result Type: ".concat(i.type,"\n")),(null==i?void 0:i.traits)&&(a+="Traits: ".concat(i.traits.join(", "),"\n")),(null==i?void 0:i.scores)&&(a+="\nScores:\n",Object.entries(i.scores).forEach(e=>{let[t,s]=e;"percentages"===t&&"object"==typeof s&&null!==s?(a+="\nPercentages:\n",Object.entries(s).forEach(e=>{let[t,s]=e;a+="  ".concat(t,": ").concat(s,"%\n")})):a+="  ".concat(t,": ").concat(s,"\n")})),o&&!["math-speed","memory-power","general-knowledge"].includes(e.testId)&&(a+="\nDetailed Answers:\n",Object.entries(o).forEach(e=>{let[t,s]=e;a+="  ".concat(t,": ").concat(s,"\n")})),a+="\n=== Generated by PersonaTests ===\n";let r=new Blob([a+="Take your own test: https://korean-mbti-platform.netlify.app/".concat(n,"/tests\n")],{type:"text/plain"}),c=URL.createObjectURL(r),d=document.createElement("a");d.href=c,d.download="".concat(l.replace(/\s+/g,"_"),"_Results_").concat(new Date().toISOString().split("T")[0],".txt"),document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(c)},K=(e,t,i)=>{var o,a,n;let r={movie_chill:s("tests.couple.options.q1_a")||"Movie & chill",party_out:s("tests.couple.options.q1_b")||"Party out",dinner_date:s("tests.couple.options.q1_c")||"Dinner date",gaming:s("tests.couple.options.q1_d")||"Gaming",beach:s("tests.couple.options.q2_a")||"Beach",mountains:s("tests.couple.options.q2_b")||"Mountains",city_tour:s("tests.couple.options.q2_c")||"City tour",staycation:s("tests.couple.options.q2_d")||"Staycation",adventure:s("tests.couple.options.q3_a")||"Outdoor adventure",culture:s("tests.couple.options.q3_b")||"Museums/culture",relax_home:s("tests.couple.options.q3_c")||"Relax at home",social:s("tests.couple.options.q3_d")||"Social events",early_bird:s("tests.couple.options.q4_a")||"Early bird",night_owl:s("tests.couple.options.q4_b")||"Night owl",flexible:s("tests.couple.options.q4_c")||"Flexible",big_party:s("tests.couple.options.q5_a")||"Big party",intimate:s("tests.couple.options.q5_b")||"Intimate dinner",adventure_trip:s("tests.couple.options.q5_c")||"Adventure trip",simple_home:s("tests.couple.options.q5_d")||"Simple at home",trust:s("tests.couple.options.q6_a")||"Trust",fun:s("tests.couple.options.q6_b")||"Fun",communication:s("tests.couple.options.q6_c")||"Communication",support:s("tests.couple.options.q6_d")||"Support",talk_immediately:s("tests.couple.options.q7_a")||"Talk immediately",cool_down_first:s("tests.couple.options.q7_b")||"Cool down first",compromise:s("tests.couple.options.q7_c")||"Find compromise",avoid:s("tests.couple.options.q7_d")||"Avoid conflict",words:s("tests.couple.options.q8_a")||"Words of affirmation",quality_time:s("tests.couple.options.q8_b")||"Quality time",physical_touch:s("tests.couple.options.q8_c")||"Physical touch",acts_service:s("tests.couple.options.q8_d")||"Acts of service",gifts:s("tests.couple.options.q8_e")||"Gifts",lots_together:s("tests.couple.options.q9_a")||"Lots of time together",balanced:s("tests.couple.options.q9_b")||"Balanced time",independent:s("tests.couple.options.q9_c")||"Need independence"},c={couple_1:{movie_chill:["dinner_date"],party_out:[],dinner_date:["movie_chill"],gaming:["movie_chill"]},couple_2:{beach:["staycation"],mountains:["city_tour"],city_tour:["mountains"],staycation:["beach"]},couple_3:{adventure:["social"],culture:["relax_home"],relax_home:["culture"],social:["adventure"]},couple_4:{early_bird:[],night_owl:[],flexible:["early_bird","night_owl"]},couple_5:{big_party:[],intimate:["simple_home"],adventure_trip:[],simple_home:["intimate"]},couple_6:{trust:["communication"],fun:[],communication:["trust","support"],support:["communication"]},couple_7:{talk_immediately:["compromise"],cool_down_first:["compromise"],compromise:["talk_immediately","cool_down_first"],avoid:[]},couple_8:{words:[],quality_time:["physical_touch"],physical_touch:["quality_time"],acts_service:[],gifts:[]},couple_9:{lots_together:["balanced"],balanced:["lots_together","independent"],independent:["balanced"]}},d={};if(null==t||null==(o=t.partner2)?void 0:o.userPreferences){let e={friday_night:"couple_1",vacation_type:"couple_2",weekend_style:"couple_3",schedule:"couple_4",celebrations:"couple_5",relationship_priority:"couple_6",conflict_style:"couple_7",love_language:"couple_8",time_together:"couple_9",partner_values:"couple_10",money_philosophy:"couple_11",food_preferences:"couple_12",planning_style:"couple_13",social_preferences:"couple_14",communication_style:"couple_15"};Object.keys(t.partner2.userPreferences).forEach(s=>{Object.keys(t.partner2.userPreferences[s]||{}).forEach(l=>{let i=e[l];i&&(d[i]=t.partner2.userPreferences[s][l])})})}else(null==t||null==(a=t.partner1)?void 0:a.answers)&&(null==t||null==(n=t.partner2)?void 0:n.answers)&&(d=t.partner2.answers);let u="";return[{id:"couple_1",textKey:"tests.couple.questions.q1",category:"Lifestyle & Fun"},{id:"couple_2",textKey:"tests.couple.questions.q2",category:"Lifestyle & Fun"},{id:"couple_3",textKey:"tests.couple.questions.q3",category:"Lifestyle & Fun"},{id:"couple_4",textKey:"tests.couple.questions.q4",category:"Lifestyle & Fun"},{id:"couple_5",textKey:"tests.couple.questions.q5",category:"Lifestyle & Fun"},{id:"couple_6",textKey:"tests.couple.questions.q6",category:"Values & Relationships"},{id:"couple_7",textKey:"tests.couple.questions.q7",category:"Values & Relationships"},{id:"couple_8",textKey:"tests.couple.questions.q8",category:"Values & Relationships"},{id:"couple_9",textKey:"tests.couple.questions.q9",category:"Values & Relationships"},{id:"couple_10",textKey:"tests.couple.questions.q10",category:"Values & Relationships"},{id:"couple_11",textKey:"tests.couple.questions.q11",category:"Lifestyle Compatibility"},{id:"couple_12",textKey:"tests.couple.questions.q12",category:"Lifestyle Compatibility"},{id:"couple_13",textKey:"tests.couple.questions.q13",category:"Lifestyle Compatibility"},{id:"couple_14",textKey:"tests.couple.questions.q14",category:"Lifestyle Compatibility"},{id:"couple_15",textKey:"tests.couple.questions.q15",category:"Lifestyle Compatibility"}].map(t=>{var i,o,a;let n=e[t.id],p=d[t.id];if(!n)return null;let m=(i=t.id,n===p?{type:"exact",label:"Perfect Match",color:"text-green-400",bgColor:"bg-green-500/20",icon:"✅"}:(null==(a=c[i])||null==(o=a[n])?void 0:o.includes(p))?{type:"partial",label:"Compatible",color:"text-yellow-400",bgColor:"bg-yellow-500/20",icon:"\uD83D\uDFE1"}:{type:"different",label:"Different",color:"text-gray-400",bgColor:"bg-gray-500/20",icon:"◯"}),h=u!==t.category;return u=t.category,(0,l.jsxs)("div",{children:[h&&(0,l.jsx)("div",{className:"mb-3 mt-6 first:mt-0",children:(0,l.jsx)("h6",{className:"text-sm font-semibold text-white/90 border-l-4 border-purple-400 pl-3",children:t.category})}),(0,l.jsxs)("div",{className:"p-3 rounded-lg ".concat(m.bgColor," border border-white/10"),children:[(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("h6",{className:"text-sm font-medium text-white/90 mb-1",children:s(t.textKey)||t.textKey}),(0,l.jsx)("div",{className:"flex items-center gap-2",children:(0,l.jsxs)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(m.bgColor," ").concat(m.color," font-medium"),children:[m.icon," ",m.label]})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{className:"bg-white/5 p-3 rounded",children:[(0,l.jsx)("div",{className:"text-xs text-white/60 mb-1",children:"You"}),(0,l.jsx)("div",{className:"text-sm text-white/90 font-medium",children:r[n]||n})]}),(0,l.jsxs)("div",{className:"bg-white/5 p-3 rounded",children:[(0,l.jsx)("div",{className:"text-xs text-white/60 mb-1",children:"Your Partner"}),(0,l.jsx)("div",{className:"text-sm text-white/90 font-medium",children:r[p]||p})]})]})]})]},t.id)}).filter(Boolean)};return t||f?(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-400 via-purple-500 to-purple-600 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-white mx-auto"}),(0,l.jsx)("p",{className:"mt-4 text-lg text-white",children:"Loading your results..."})]})}):e||f?(0,l.jsxs)("main",{className:"flex min-h-screen flex-col items-center p-8 bg-gradient-to-br from-indigo-400 via-purple-500 to-purple-600",children:[(0,l.jsxs)("div",{className:"w-full max-w-6xl",children:[(0,l.jsxs)("div",{className:"mb-8 flex justify-between items-center",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold text-white","data-translate":"results.page_title",children:s("results.page_title")||"My Test Results"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(r(),{href:"/".concat(n,"/tests"),children:(0,l.jsx)("button",{className:"px-4 py-2 bg-white/20 backdrop-blur-sm border border-white/30 text-white rounded hover:bg-white/30 hover:scale-105 transition-all duration-300",children:s("results.take_test")||"Take Another Test"})}),(0,l.jsx)(r(),{href:"/".concat(n),children:(0,l.jsx)("button",{className:"px-4 py-2 bg-white/20 backdrop-blur-sm border border-white/30 text-white rounded hover:bg-white/30 hover:scale-105 transition-all duration-300",children:s("results.back_home")||"Back to Home"})})]})]}),m.length>0&&(0,l.jsxs)("div",{className:"mb-8 p-6 bg-yellow-50 border border-yellow-200 rounded-lg dark:bg-yellow-900/20 dark:border-yellow-800",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4 text-yellow-800 dark:text-yellow-200",children:s("results.pending_invitations")||"Pending Feedback Invitations"}),(0,l.jsx)("div",{className:"space-y-2",children:m.map(e=>(0,l.jsxs)("div",{className:"flex justify-between items-center p-3 bg-white rounded dark:bg-gray-800",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium",children:P(e.testId)}),(0,l.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Sent to: ",e.participantEmail]})]}),(0,l.jsx)("span",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:s("results.waiting_response")||"Waiting for response"})]},e.id))})]}),0===u.length&&0===b.length?(0,l.jsxs)("div",{className:"text-center p-8 bg-gray-50 rounded-lg dark:bg-gray-800",children:[(0,l.jsx)("h2",{className:"text-2xl font-semibold mb-4","data-translate":"results.no_results_title",children:s("results.no_results_title")||"No Test Results Yet"}),(0,l.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6","data-translate":"results.no_results_message",children:s("results.no_results_message")||"You haven't completed any personality tests yet. Start your journey of self-discovery today!"}),(0,l.jsx)(r(),{href:"/".concat(n,"/tests"),children:(0,l.jsx)("button",{className:"p-4 bg-green-500 text-white rounded-lg hover:bg-green-600","data-translate":"results.take_first_test",children:s("results.take_first_test")||"Take a Test"})})]}):(0,l.jsxs)("div",{className:"space-y-6",children:[b.length>0&&(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold text-white mb-4",children:["\uD83D\uDC95 ","ko"===n?"커플 호환성 결과":"Couple Compatibility Results"]}),(0,l.jsx)("div",{className:"space-y-4",children:b.map((e,t)=>{var s,i,o,a,r,c,d,u,p,m,h,x,g,b,y;return(0,l.jsxs)("div",{className:"p-6 bg-white/10 backdrop-blur-sm border border-white/30 rounded-lg",children:[(0,l.jsxs)("div",{className:"text-center mb-4",children:[(0,l.jsxs)("div",{className:"text-3xl font-bold text-white mb-2",children:[(null==(s=e.compatibilityResults)?void 0:s.compatibilityPercentage)||(null==(o=e.compatibilityResults)||null==(i=o.compatibilityData)?void 0:i.percentage),"%"]}),(0,l.jsx)("div",{className:"text-xl text-white/90",children:(null==(a=e.compatibilityResults)?void 0:a.description)||(null==(c=e.compatibilityResults)||null==(r=c.compatibilityData)?void 0:r.description)||"Great compatibility!"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-lg font-semibold text-white",children:(null==(d=e.partnerNames)?void 0:d.partner1)||"Partner 1"}),(0,l.jsx)("div",{className:"text-white/80",children:(null==(p=e.individualResults)||null==(u=p.partner1)?void 0:u.type)||"The Devoted Partner \uD83D\uDC95"})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-lg font-semibold text-white",children:(null==(m=e.partnerNames)?void 0:m.partner2)||"Partner 2"}),(0,l.jsx)("div",{className:"text-white/80",children:(null==(x=e.individualResults)||null==(h=x.partner2)?void 0:h.type)||"The Devoted Partner \uD83D\uDC95"})]})]}),(null==(g=e.compatibilityResults)?void 0:g.areaScores)&&(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("h4",{className:"text-lg font-semibold text-white mb-2",children:"ko"===n?"호환성 영역:":"Compatibility Areas:"}),(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-white/90",children:Object.entries(e.compatibilityResults.areaScores).map(e=>{let[t,s]=e;return(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("span",{children:[t,":"]}),(0,l.jsxs)("span",{className:"font-semibold",children:[s,"%"]})]},t)})})]}),(null==(b=e.compatibilityResults)?void 0:b.detailedComparison)&&(0,l.jsxs)("div",{className:"mt-6",children:[(0,l.jsx)("h4",{className:"text-lg font-semibold text-white mb-4",children:"ko"===n?"문항별 상세 비교:":"Question-by-Question Comparison:"}),(0,l.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:e.compatibilityResults.detailedComparison.map((t,s)=>{var i,o;return(0,l.jsxs)("div",{className:"p-3 bg-white/5 rounded border border-white/20",children:[(0,l.jsxs)("div",{className:"text-sm text-white/90 mb-2",children:[(0,l.jsxs)("strong",{children:["Q",s+1,":"]})," ",t.question||"Question ".concat(s+1)]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[(0,l.jsxs)("div",{className:"text-white/80",children:[(0,l.jsxs)("span",{className:"font-medium",children:[null==(i=e.partnerNames)?void 0:i.partner1,":"]})," ",t.partner1Answer]}),(0,l.jsxs)("div",{className:"text-white/80",children:[(0,l.jsxs)("span",{className:"font-medium",children:[null==(o=e.partnerNames)?void 0:o.partner2,":"]})," ",t.partner2Answer]})]}),(0,l.jsx)("div",{className:"text-center mt-2",children:(0,l.jsx)("span",{className:"inline-flex px-2 py-1 rounded text-xs ".concat(t.match?"bg-green-500/20 text-green-200":"bg-red-500/20 text-red-200"),children:t.match?"✓ Match":"✗ Different"})})]},s)})})]}),(0,l.jsx)("div",{className:"mt-4 text-center",children:(0,l.jsx)("button",{onClick:()=>j(v==="couple-".concat(t)?null:"couple-".concat(t)),className:"px-6 py-2 bg-purple-500/30 backdrop-blur-sm border border-purple-400/50 text-white rounded-lg hover:bg-purple-500/50 transition-all duration-300",children:v==="couple-".concat(t)?"Hide Details":"Show Details"})}),v==="couple-".concat(t)&&(0,l.jsxs)("div",{className:"mt-6 p-4 bg-white/5 rounded-lg",children:[(0,l.jsx)("h4",{className:"text-lg font-semibold text-white mb-4",children:"Question-by-Question Comparison"}),(0,l.jsx)("div",{className:"space-y-3",children:(()=>{var t,s,l,i;let o=(null==(s=e.compatibilityResults)||null==(t=s.partner1)?void 0:t.userPreferences)||{},a=(null==(i=e.compatibilityResults)||null==(l=i.partner2)?void 0:l.userPreferences)||{},n={friday_night:"couple_1",vacation_type:"couple_2",weekend_style:"couple_3",schedule:"couple_4",celebrations:"couple_5",relationship_priority:"couple_6",conflict_style:"couple_7",love_language:"couple_8",time_together:"couple_9",partner_values:"couple_10",money_philosophy:"couple_11",food_preferences:"couple_12",planning_style:"couple_13",social_preferences:"couple_14",communication_style:"couple_15"},r=e=>{let t={};return Object.keys(e).forEach(s=>{Object.keys(e[s]||{}).forEach(l=>{let i=n[l];i&&(t[i]=e[s][l])})}),t},c=r(o);console.log("\uD83D\uDD0D DEBUG: Mapped partner1 answers:",c),console.log("\uD83D\uDD0D DEBUG: Sample question IDs:",Object.keys(c).slice(0,5)),console.log("\uD83D\uDD0D DEBUG: Mapped partner2 answers:",r(a));let d=K(c,e.compatibilityResults,null);return console.log("\uD83D\uDD0D DEBUG: renderQuestionComparison result length:",null==d?void 0:d.length),d})()})]}),(null==(y=e.compatibilityResults)?void 0:y.questionComparisons)&&(0,l.jsxs)("div",{className:"mt-6",children:[(0,l.jsx)("h4",{className:"text-lg font-semibold text-white mb-4",children:"ko"===n?"문항별 상세 비교:":"Question-by-Question Comparison:"}),(0,l.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:Object.entries(e.compatibilityResults.questionComparisons).map((t,s)=>{var i,o;let[a,n]=t;return(0,l.jsxs)("div",{className:"p-3 bg-white/5 rounded border border-white/20",children:[(0,l.jsxs)("div",{className:"text-sm text-white/90 mb-2",children:[(0,l.jsxs)("strong",{children:["Q",s+1,":"]})," ",n.question||a]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[(0,l.jsxs)("div",{className:"text-white/80",children:[(0,l.jsxs)("span",{className:"font-medium",children:[null==(i=e.partnerNames)?void 0:i.partner1,":"]})," ",n.answer1]}),(0,l.jsxs)("div",{className:"text-white/80",children:[(0,l.jsxs)("span",{className:"font-medium",children:[null==(o=e.partnerNames)?void 0:o.partner2,":"]})," ",n.answer2]})]}),(0,l.jsx)("div",{className:"text-center mt-2",children:(0,l.jsx)("span",{className:"inline-flex px-2 py-1 rounded text-xs ".concat(n.match?"bg-green-500/20 text-green-200":"bg-red-500/20 text-red-200"),children:n.match?"✓ Match":"✗ Different"})})]},a)})})]}),(0,l.jsx)("div",{className:"mt-4 text-center",children:(0,l.jsxs)("div",{className:"text-sm text-white/70",children:["ko"===n?"완료 날짜:":"Completed:"," ",new Date(e.completedAt||e.createdAt).toLocaleDateString()]})})]},e.id||t)})})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsxs)("div",{className:"text-sm text-white/70 mb-4",children:[s("results.total_completed")||"Total tests completed",": ",(0,l.jsx)("span",{className:"font-semibold",children:u.filter(e=>"couple-compatibility-results"!==e.testId).length})]}),Object.entries((()=>{let e={};return u.filter(e=>"couple-compatibility-results"!==e.testId).forEach(t=>{e[t.testId]||(e[t.testId]=[]),e[t.testId].push(t)}),Object.keys(e).forEach(t=>{e[t]=e[t].sort((e,t)=>{var s,l;let i=(null==(s=e.createdAt)?void 0:s.toDate)?e.createdAt.toDate():new Date(e.createdAt?e.createdAt:0);return((null==(l=t.createdAt)?void 0:l.toDate)?t.createdAt.toDate():new Date(t.createdAt?t.createdAt:0)).getTime()-i.getTime()})}),e})()).map(t=>{let[i,o]=t;return(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold text-white",children:P(i)}),(0,l.jsxs)("span",{className:"px-3 py-1 bg-white/20 rounded-full text-white/80 text-sm",children:[o.length," ",1===o.length?s("results.result")||"result":s("results.results")||"results"]})]}),o.length>1&&(0,l.jsx)("button",{onClick:()=>(e=>{let t=new Set(D);t.has(e)?t.delete(e):t.add(e),k(t)})(i),className:"px-4 py-2 bg-white/20 backdrop-blur-sm border border-white/30 text-white rounded-lg hover:bg-white/30 transition-all duration-300 text-sm flex items-center gap-2",children:D.has(i)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{children:"\uD83D\uDCCB"}),(0,l.jsx)("span",{children:s("results.show_recent_only")||"Show Recent Only"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{children:"\uD83D\uDCCA"}),(0,l.jsxs)("span",{children:[s("results.show_all_results")||"Show All Results"," (",o.length,")"]})]})})]}),(0,l.jsx)("div",{className:"space-y-4",children:(D.has(i)?o:o.slice(0,1)).map(t=>(t=>{var i,o,a,c,u;let p=(0,d.tb)(t.testId),m=null==(i=t.resultPayload)?void 0:i.answers,h=null==(o=t.resultPayload)?void 0:o.result,g=t.id&&x[t.id]||[],b="couple-compatibility"===t.testId,y=null==h?void 0:h.compatibilityData,f=(null==h||null==(a=h.scores)?void 0:a.compatibility)||0;if(b&&h){let e=f>=95?{emoji:"\uD83D\uDC8D",label:"Soulmates",color:"text-pink-400"}:f>=85?{emoji:"⚡",label:"Power Couple",color:"text-yellow-400"}:f>=75?{emoji:"\uD83C\uDF0D",label:"Adventurous Duo",color:"text-green-400"}:f>=65?{emoji:"\uD83D\uDC95",label:"Sweet Match",color:"text-red-400"}:f>=50?{emoji:"\uD83D\uDD28",label:"Work in Progress",color:"text-blue-400"}:f>=35?{emoji:"\uD83D\uDCDA",label:"Learning Together",color:"text-purple-400"}:{emoji:"\uD83E\uDD14",label:"Opposites Attract",color:"text-gray-400"};return(0,l.jsxs)("div",{className:"p-8 bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl shadow-2xl",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"absolute -top-2 -right-2",children:(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),t.id&&S(t.id)},className:"w-8 h-8 bg-red-500/80 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm transition-all duration-200 shadow-lg hover:shadow-xl",title:s("results.deleteResult")||"Delete Result",children:"\uD83D\uDDD1️"})}),(0,l.jsxs)("div",{className:"text-center mb-8",children:[(0,l.jsx)("div",{className:"text-6xl mb-4",children:e.emoji}),(0,l.jsx)("h3",{className:"text-3xl font-bold text-white mb-2",children:"\uD83D\uDC95 Couple Compatibility Results"}),(0,l.jsxs)("p",{className:"text-white text-lg",children:["Completed on ",T(t.createdAt)]})]})]}),(0,l.jsxs)("div",{className:"text-center mb-8 p-6 bg-white/10 rounded-xl",children:[(0,l.jsxs)("div",{className:"text-5xl font-bold text-white mb-2",children:[f,"%"]}),(0,l.jsxs)("div",{className:"text-2xl font-semibold mb-4 ".concat(e.color),children:[e.emoji," ",e.label]}),(0,l.jsx)("div",{className:"w-full bg-white/20 rounded-full h-4 mb-4",children:(0,l.jsx)("div",{className:"bg-gradient-to-r from-pink-400 to-red-400 h-4 rounded-full transition-all duration-1000 ease-out",style:{width:"".concat(f,"%")}})}),(0,l.jsx)("p",{className:"text-white/90 text-lg",children:f>=85?"You two are incredibly compatible! \uD83C\uDF89":f>=65?"You have great potential together! \uD83D\uDCAB":f>=50?"There's room to grow together! \uD83C\uDF31":"Every couple can learn and grow! \uD83D\uDCAA"})]}),h.type&&(0,l.jsxs)("div",{className:"mb-8 p-6 bg-white/10 rounded-xl",children:[(0,l.jsx)("h4",{className:"text-xl font-semibold text-white mb-4 text-center",children:"\uD83D\uDCAB Your Personality Type"}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-purple-300 mb-2",children:s(h.type)||h.type}),h.traits&&(0,l.jsx)("div",{className:"flex justify-center flex-wrap gap-2 mt-4",children:h.traits.map((e,t)=>(0,l.jsx)("span",{className:"px-3 py-1 bg-purple-500/30 text-purple-100 rounded-full text-sm",children:e},t))})]})]}),(null==y?void 0:y.areaBreakdown)&&(0,l.jsxs)("div",{className:"mb-8 p-6 bg-white/10 rounded-xl",children:[(0,l.jsx)("h4",{className:"text-xl font-semibold text-white mb-6 text-center",children:"\uD83C\uDFAF Compatibility Areas"}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(y.areaBreakdown).map(e=>{let[t,s]=e,i="number"==typeof s?s:0,o="number"==typeof s?"".concat(Math.round(s),"%"):String(s);return(0,l.jsxs)("div",{className:"bg-white/5 p-4 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)("span",{className:"text-white font-medium capitalize",children:t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())}),(0,l.jsx)("span",{className:"text-white/80 font-semibold",children:o})]}),(0,l.jsx)("div",{className:"w-full bg-white/20 rounded-full h-2",children:(0,l.jsx)("div",{className:"bg-gradient-to-r from-blue-400 to-purple-400 h-2 rounded-full transition-all duration-1000 ease-out",style:{width:"".concat(i,"%")}})})]},t)})})]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center mt-8",children:[(0,l.jsxs)("div",{className:"relative group",children:[(0,l.jsxs)("button",{className:"px-6 py-3 bg-gradient-to-r from-pink-500 to-red-500 text-white font-semibold rounded-lg hover:from-pink-600 hover:to-red-600 transition-all duration-300 shadow-lg flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDC95"}),(0,l.jsx)("span",{children:s("share.share_results")||"Share Results"}),(0,l.jsx)("span",{className:"text-xs",children:"▼"})]}),(0,l.jsx)("div",{className:"absolute left-1/2 transform -translate-x-1/2 mt-2 w-48 bg-white/95 backdrop-blur-sm border border-white/30 rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:(0,l.jsxs)("div",{className:"p-2 space-y-1",children:[(0,l.jsxs)("button",{onClick:()=>I(t,"copy"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-pink-50 rounded flex items-center gap-2",children:["\uD83D\uDCCB ",s("share.copy_link")||"Copy Link"]}),(0,l.jsxs)("button",{onClick:()=>I(t,"twitter"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-pink-50 rounded flex items-center gap-2",children:["\uD83D\uDC26 ",s("share.twitter")||"Twitter"]}),(0,l.jsxs)("button",{onClick:()=>I(t,"facebook"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-pink-50 rounded flex items-center gap-2",children:["\uD83D\uDCD8 ",s("share.facebook")||"Facebook"]}),(0,l.jsxs)("button",{onClick:()=>I(t,"linkedin"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-pink-50 rounded flex items-center gap-2",children:["\uD83D\uDCBC ",s("share.linkedin")||"LinkedIn"]}),(0,l.jsxs)("button",{onClick:()=>I(t,"whatsapp"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-pink-50 rounded flex items-center gap-2",children:["\uD83D\uDCAC ",s("share.whatsapp")||"WhatsApp"]}),(0,l.jsx)("div",{className:"border-t border-gray-200 my-1"}),(0,l.jsxs)("button",{onClick:()=>I(t,"download"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-pink-50 rounded flex items-center gap-2",children:["\uD83D\uDCBE ",s("share.download")||"Download Results"]})]})})]}),(0,l.jsx)(r(),{href:"/".concat(n,"/tests/couple-compatibility/"),children:(0,l.jsx)("button",{className:"px-6 py-3 bg-white/20 backdrop-blur-sm border border-white/30 text-white font-semibold rounded-lg hover:bg-white/30 transition-all duration-300",children:"\uD83D\uDD04 Test with Another Partner"})}),(0,l.jsx)("button",{onClick:()=>j(v===t.id?null:t.id),className:"px-6 py-3 bg-white/20 backdrop-blur-sm border border-white/30 text-white rounded-lg hover:bg-white/30 transition-all duration-300",children:v===t.id?"Hide Details":"Show Details"})]}),v===t.id&&(0,l.jsxs)("div",{className:"mt-8 pt-8 border-t border-white/20 space-y-6",children:[y&&(0,l.jsxs)("div",{className:"p-4 bg-white/5 rounded-lg",children:[(0,l.jsx)("h5",{className:"text-lg font-semibold text-white mb-4",children:"\uD83D\uDC6B Partner Information"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,l.jsxs)("div",{className:"text-white/80",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Your Partner:"})," ",y.partnerName||"Unknown"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Test Date:"})," ",T(t.createdAt)]})]}),(0,l.jsxs)("div",{className:"text-white/80",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Questions Answered:"})," 15"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Analysis Depth:"})," Advanced"]})]})]})]}),y&&(0,l.jsxs)("div",{className:"p-4 bg-white/5 rounded-lg",children:[(0,l.jsx)("h5",{className:"text-lg font-semibold text-white mb-4",children:"\uD83E\uDD1D Question by Question Comparison"}),(0,l.jsx)("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:K(m,y,t)})]}),m&&!y&&(0,l.jsxs)("div",{className:"p-4 bg-white/5 rounded-lg",children:[(0,l.jsx)("h5",{className:"text-lg font-semibold text-white mb-4",children:"\uD83E\uDD1D Question by Question Comparison Preview"}),(0,l.jsxs)("div",{className:"mb-4 p-3 bg-blue-500/10 rounded text-sm text-blue-200",children:[(0,l.jsxs)("p",{children:["\uD83D\uDCCB ",(0,l.jsx)("strong",{children:"Preview Mode:"})," This shows how your comparison will look when your partner completes the test!"]}),(0,l.jsx)("p",{className:"text-xs mt-1",children:"Showing sample answers for demonstration purposes."})]}),(0,l.jsx)("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:(e=>{let t={couple_1:"dinner_date",couple_2:"beach",couple_3:"relax_home",couple_4:"flexible",couple_5:"intimate",couple_6:"trust",couple_7:"compromise",couple_8:"quality_time",couple_9:"balanced",couple_10:"growth",couple_11:"balanced",couple_12:"healthy_eating",couple_13:"flexible_plans",couple_14:"small_circle",couple_15:"gentle_supportive"},i={movie_chill:s("tests.couple.options.q1_a")||"Movie & chill",party_out:s("tests.couple.options.q1_b")||"Party out",dinner_date:s("tests.couple.options.q1_c")||"Dinner date",gaming:s("tests.couple.options.q1_d")||"Gaming",beach:s("tests.couple.options.q2_a")||"Beach",mountains:s("tests.couple.options.q2_b")||"Mountains",city_tour:s("tests.couple.options.q2_c")||"City tour",staycation:s("tests.couple.options.q2_d")||"Staycation",adventure:s("tests.couple.options.q3_a")||"Outdoor adventure",culture:s("tests.couple.options.q3_b")||"Museums/culture",relax_home:s("tests.couple.options.q3_c")||"Relax at home",social:s("tests.couple.options.q3_d")||"Social events",early_bird:s("tests.couple.options.q4_a")||"Early bird",night_owl:s("tests.couple.options.q4_b")||"Night owl",flexible:s("tests.couple.options.q4_c")||"Flexible",big_party:s("tests.couple.options.q5_a")||"Big party",intimate:s("tests.couple.options.q5_b")||"Intimate dinner",adventure_trip:s("tests.couple.options.q5_c")||"Adventure trip",simple_home:s("tests.couple.options.q5_d")||"Simple at home",trust:s("tests.couple.options.q6_a")||"Trust",fun:s("tests.couple.options.q6_b")||"Fun",communication:s("tests.couple.options.q6_c")||"Communication",support:s("tests.couple.options.q6_d")||"Support",talk_immediately:s("tests.couple.options.q7_a")||"Talk immediately",cool_down_first:s("tests.couple.options.q7_b")||"Cool down first",compromise:s("tests.couple.options.q7_c")||"Find compromise",avoid:s("tests.couple.options.q7_d")||"Avoid conflict",words:s("tests.couple.options.q8_a")||"Words of affirmation",quality_time:s("tests.couple.options.q8_b")||"Quality time",physical_touch:s("tests.couple.options.q8_c")||"Physical touch",acts_service:s("tests.couple.options.q8_d")||"Acts of service",gifts:s("tests.couple.options.q8_e")||"Gifts",lots_together:s("tests.couple.options.q9_a")||"Lots of time together",balanced:s("tests.couple.options.q9_b")||"Balanced time",independent:s("tests.couple.options.q9_c")||"Need independence",growth:"Personal growth",healthy_eating:"Healthy eating",flexible_plans:"Flexible planning",small_circle:"Small circle",gentle_supportive:"Gentle & supportive"},o={couple_1:{movie_chill:["dinner_date"],dinner_date:["movie_chill"]},couple_2:{beach:["staycation"],mountains:["city_tour"]},couple_3:{adventure:["social"],relax_home:["culture"]},couple_4:{flexible:["early_bird","night_owl"]},couple_5:{intimate:["simple_home"]},couple_6:{trust:["communication"]},couple_7:{compromise:["talk_immediately","cool_down_first"]},couple_8:{quality_time:["physical_touch"]},couple_9:{balanced:["lots_together","independent"]}},a="";return[{id:"couple_1",textKey:"tests.couple.questions.q1",category:"Lifestyle & Fun"},{id:"couple_2",textKey:"tests.couple.questions.q2",category:"Lifestyle & Fun"},{id:"couple_3",textKey:"tests.couple.questions.q3",category:"Lifestyle & Fun"},{id:"couple_4",textKey:"tests.couple.questions.q4",category:"Lifestyle & Fun"},{id:"couple_5",textKey:"tests.couple.questions.q5",category:"Lifestyle & Fun"},{id:"couple_6",textKey:"tests.couple.questions.q6",category:"Values & Relationships"},{id:"couple_7",textKey:"tests.couple.questions.q7",category:"Values & Relationships"},{id:"couple_8",textKey:"tests.couple.questions.q8",category:"Values & Relationships"},{id:"couple_9",textKey:"tests.couple.questions.q9",category:"Values & Relationships"},{id:"couple_10",textKey:"tests.couple.questions.q10",category:"Values & Relationships"},{id:"couple_11",textKey:"tests.couple.questions.q11",category:"Lifestyle Compatibility"},{id:"couple_12",textKey:"tests.couple.questions.q12",category:"Lifestyle Compatibility"},{id:"couple_13",textKey:"tests.couple.questions.q13",category:"Lifestyle Compatibility"},{id:"couple_14",textKey:"tests.couple.questions.q14",category:"Lifestyle Compatibility"},{id:"couple_15",textKey:"tests.couple.questions.q15",category:"Lifestyle Compatibility"}].map(n=>{var r,c,d;let u=e[n.id],p=t[n.id];if(!u)return null;let m=(r=n.id,u===p?{type:"exact",label:"Perfect Match",color:"text-green-400",bgColor:"bg-green-500/20",icon:"✅"}:(null==(d=o[r])||null==(c=d[u])?void 0:c.includes(p))?{type:"partial",label:"Compatible",color:"text-yellow-400",bgColor:"bg-yellow-500/20",icon:"\uD83D\uDFE1"}:{type:"different",label:"Different",color:"text-gray-400",bgColor:"bg-gray-500/20",icon:"◯"}),h=a!==n.category;return a=n.category,(0,l.jsxs)("div",{children:[h&&(0,l.jsx)("div",{className:"mb-3 mt-6 first:mt-0",children:(0,l.jsx)("h6",{className:"text-sm font-semibold text-white/90 border-l-4 border-purple-400 pl-3",children:n.category})}),(0,l.jsxs)("div",{className:"p-3 rounded-lg ".concat(m.bgColor," border border-white/10"),children:[(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("h6",{className:"text-sm font-medium text-white/90 mb-1",children:s(n.textKey)||n.textKey}),(0,l.jsx)("div",{className:"flex items-center gap-2",children:(0,l.jsxs)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(m.bgColor," ").concat(m.color," font-medium"),children:[m.icon," ",m.label]})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{className:"bg-white/5 p-3 rounded",children:[(0,l.jsx)("div",{className:"text-xs text-white/60 mb-1",children:"You"}),(0,l.jsx)("div",{className:"text-sm text-white/90 font-medium",children:i[u]||u})]}),(0,l.jsxs)("div",{className:"bg-white/5 p-3 rounded relative",children:[(0,l.jsx)("div",{className:"text-xs text-white/60 mb-1",children:"Your Partner"}),(0,l.jsx)("div",{className:"text-sm text-white/90 font-medium",children:i[p]||p})]})]})]})]},n.id)}).filter(Boolean)})(m)})]}),h.insights&&(0,l.jsxs)("div",{className:"p-4 bg-white/5 rounded-lg",children:[(0,l.jsx)("h5",{className:"text-lg font-semibold text-white mb-3",children:"\uD83D\uDCA1 Relationship Insights"}),(0,l.jsx)("div",{className:"text-white/90 space-y-2",children:h.insights.map((e,t)=>(0,l.jsxs)("p",{className:"text-sm",children:["• ",e]},t))})]})]})]},t.id)}return(0,l.jsxs)("div",{className:"p-6 bg-white/30 backdrop-blur-md border border-white/40 rounded-lg shadow-lg relative",children:[(0,l.jsx)("div",{className:"absolute -top-2 -right-2",children:(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),t.id&&S(t.id)},className:"w-8 h-8 bg-red-500/80 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm transition-all duration-200 shadow-lg hover:shadow-xl",title:s("results.deleteResult")||"Delete Result",children:"\uD83D\uDDD1️"})}),(0,l.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-xl font-semibold text-white",children:P(t.testId)}),(0,l.jsxs)("p",{className:"text-white",children:["Completed on ",T(t.createdAt)]}),(0,l.jsxs)("div",{className:"flex gap-4 text-sm text-white mt-1",children:[(0,l.jsxs)("span",{children:["Questions: ",Object.keys(m||{}).length]}),g.length>0&&(0,l.jsxs)("span",{className:"text-green-400",children:["Feedback: ",g.length," responses"]}),(null==p?void 0:p.requiresFeedback)&&(0,l.jsx)("span",{className:"text-blue-400",children:"Feedback-enabled"})]})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)("div",{className:"relative group",children:[(0,l.jsxs)("button",{className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-300 shadow-lg flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDCE4"}),(0,l.jsx)("span",{children:s("share.button")||"Share"}),(0,l.jsx)("span",{className:"text-xs",children:"▼"})]}),(0,l.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white/95 backdrop-blur-sm border border-white/30 rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:(0,l.jsxs)("div",{className:"p-2 space-y-1",children:[(0,l.jsxs)("button",{onClick:()=>I(t,"copy"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-blue-50 rounded flex items-center gap-2",children:["\uD83D\uDCCB ",s("share.copy_link")||"Copy Link"]}),(0,l.jsxs)("button",{onClick:()=>I(t,"twitter"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-blue-50 rounded flex items-center gap-2",children:["\uD83D\uDC26 ",s("share.twitter")||"Twitter"]}),(0,l.jsxs)("button",{onClick:()=>I(t,"facebook"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-blue-50 rounded flex items-center gap-2",children:["\uD83D\uDCD8 ",s("share.facebook")||"Facebook"]}),(0,l.jsxs)("button",{onClick:()=>I(t,"linkedin"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-blue-50 rounded flex items-center gap-2",children:["\uD83D\uDCBC ",s("share.linkedin")||"LinkedIn"]}),(0,l.jsxs)("button",{onClick:()=>I(t,"whatsapp"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-blue-50 rounded flex items-center gap-2",children:["\uD83D\uDCAC ",s("share.whatsapp")||"WhatsApp"]}),(0,l.jsx)("div",{className:"border-t border-gray-200 my-1"}),(0,l.jsxs)("button",{onClick:()=>I(t,"download"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-blue-50 rounded flex items-center gap-2",children:["\uD83D\uDCBE ",s("share.download")||"Download Results"]})]})})]}),(0,l.jsx)("button",{onClick:()=>j(v===t.id?null:t.id),className:"px-4 py-2 bg-white/20 backdrop-blur-sm border border-white/20 text-white rounded-lg hover:bg-white/30 transition-all duration-300",children:v===t.id?"Hide Details":"View Details"})]})]}),h&&!v&&(0,l.jsxs)("div",{className:"mt-4 p-4 bg-white/10 rounded-lg",children:[h.type&&(0,l.jsxs)("div",{className:"text-center mb-4",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-white mb-2",children:s(h.type)||h.type}),h.traits&&(0,l.jsx)("div",{className:"flex justify-center flex-wrap gap-2",children:h.traits.map((e,t)=>(0,l.jsx)("span",{className:"px-3 py-1 bg-blue-500/30 text-blue-100 rounded-full text-sm",children:e},t))})]}),(null==(c=h.scores)?void 0:c.percentages)&&(0,l.jsx)("div",{className:"grid grid-cols-2 gap-3 mt-4",children:Object.entries(h.scores.percentages).map(e=>{let[t,i]=e;return(0,l.jsxs)("div",{className:"bg-white/5 p-3 rounded",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,l.jsx)("span",{className:"text-white/90 text-sm font-medium",children:s("results.bigfive.traits.".concat(t.toLowerCase()))||s("results.dimensions.".concat(t))||t}),(0,l.jsx)("span",{className:"text-white font-semibold",children:"number"==typeof i?"".concat(i,"%"):String(i)})]}),"number"==typeof i&&(0,l.jsx)("div",{className:"w-full bg-white/20 rounded-full h-1.5",children:(0,l.jsx)("div",{className:"bg-gradient-to-r from-blue-400 to-purple-400 h-1.5 rounded-full",style:{width:"".concat(i,"%")}})})]},t)})}),h.scores&&!h.scores.percentages&&(0,l.jsx)("div",{className:"grid grid-cols-2 gap-3 mt-4",children:Object.entries(h.scores).filter(e=>{let[t,s]=e;return"correctAnswers"!==t&&"level"!==t&&"description"!==t}).map(e=>{var t;let[i,o]=e,a=String(o),n=!1,r=0;return"percentage"===i&&"number"==typeof o?(a="".concat(o,"%"),n=!0,r=o):"score"===i&&"number"==typeof o&&(null==(t=h.scores)?void 0:t.total)&&(a="".concat(o,"/").concat(h.scores.total),n=!0,r=o/h.scores.total*100),(0,l.jsxs)("div",{className:"bg-white/5 p-3 rounded",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,l.jsx)("span",{className:"text-white/90 text-sm font-medium",children:s("results.dimensions.".concat(i))||i}),(0,l.jsx)("span",{className:"text-white font-semibold",children:a})]}),n&&(0,l.jsx)("div",{className:"w-full bg-white/20 rounded-full h-1.5",children:(0,l.jsx)("div",{className:"bg-gradient-to-r from-green-400 to-blue-400 h-1.5 rounded-full",style:{width:"".concat(r,"%")}})})]},i)})})]}),v===t.id&&(0,l.jsxs)("div",{className:"mt-4 space-y-4",children:[h&&(0,l.jsxs)("div",{className:"p-4 bg-white/10 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold mb-3 text-white",children:"\uD83D\uDCCA Complete Results"}),(0,l.jsxs)("div",{className:"space-y-3",children:[h.type&&(0,l.jsxs)("div",{className:"text-center p-4 bg-white/5 rounded",children:[(0,l.jsx)("div",{className:"text-xl font-bold text-purple-300 mb-2",children:s(h.type)||h.type}),h.traits&&(0,l.jsx)("div",{className:"flex justify-center flex-wrap gap-2",children:h.traits.map((e,t)=>(0,l.jsx)("span",{className:"px-2 py-1 bg-purple-500/30 text-purple-100 rounded-full text-xs",children:e},t))})]}),h.scores&&(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(h.scores).filter(e=>{let[t,s]=e;return"percentages"!==t&&"correctAnswers"!==t}).map(e=>{var t;let[i,o]=e,a=String(o);return"percentage"===i&&"number"==typeof o?a="".concat(o,"%"):"score"===i&&"number"==typeof o&&(null==(t=h.scores)?void 0:t.total)&&(a="".concat(o,"/").concat(h.scores.total)),(0,l.jsxs)("div",{className:"bg-white/5 p-3 rounded",children:[(0,l.jsxs)("span",{className:"text-white/90 font-medium",children:[s("results.dimensions.".concat(i))||i,":"]}),(0,l.jsx)("span",{className:"text-white ml-2",children:a})]},i)})}),(null==(u=h.scores)?void 0:u.correctAnswers)&&(0,l.jsxs)("div",{className:"mt-6",children:[(0,l.jsxs)("h4",{className:"font-semibold mb-3 text-white flex items-center",children:["\uD83D\uDCDD ",s("results.answerAnalysis.title")||"Detailed Answer Analysis"]}),e?(0,l.jsx)("div",{className:"space-y-2",children:h.scores.correctAnswers.map((e,t)=>(0,l.jsxs)("div",{className:"p-3 rounded-lg border-l-4 ".concat(e.isCorrect?"bg-green-500/10 border-green-400 text-green-100":"bg-red-500/10 border-red-400 text-red-100"),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,l.jsxs)("span",{className:"text-sm font-medium",children:[s("results.answerAnalysis.question")||"Question"," ",t+1]}),(0,l.jsx)("span",{className:"text-xs",children:e.isCorrect?"✅ ".concat(s("results.answerAnalysis.correct")||"Correct"):"❌ ".concat(s("results.answerAnalysis.incorrect")||"Incorrect")})]}),(0,l.jsxs)("div",{className:"text-sm space-y-2",children:[e.questionText&&(0,l.jsxs)("div",{className:"p-2 bg-white/5 rounded text-white/90",children:[(0,l.jsx)("strong",{children:"Q:"})," ",e.questionText]}),e.options&&Object.keys(e.options).length>0&&(0,l.jsx)("div",{className:"grid grid-cols-1 gap-1 mt-2",children:Object.entries(e.options).map(t=>{let[s,i]=t;console.log("\uD83D\uDD0D RESULTS - Option entry:",s,"=",i,"type:",typeof i);let o=e.userAnswer===s,a=e.correctAnswer===s;return(0,l.jsxs)("div",{className:"p-2 rounded text-xs flex items-center justify-between ".concat(a?"bg-green-500/20 border border-green-400/30 text-green-100":o?"bg-red-500/20 border border-red-400/30 text-red-100":"bg-white/5 text-white/70"),children:[(0,l.jsxs)("span",{children:[(0,l.jsxs)("strong",{children:[s.toUpperCase(),":"]})," ",String(i)]}),(0,l.jsxs)("span",{className:"text-xs",children:[a&&"✅ Correct",o&&!a&&"❌ Your choice"]})]},s)})}),(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-white/70",children:s("results.answerAnalysis.yourAnswer")||"Your answer:"}),(0,l.jsx)("span",{className:"font-medium ml-1 ".concat(e.isCorrect?"text-green-300":"text-red-300"),children:e.userAnswer||s("results.answerAnalysis.noAnswer")||"No answer"})]}),!e.isCorrect&&(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-white/70",children:s("results.answerAnalysis.correctAnswer")||"Correct answer:"}),(0,l.jsx)("span",{className:"font-medium text-green-300 ml-1",children:e.correctAnswer})]})]})]})]},t))}):(0,l.jsx)("div",{className:"bg-gradient-to-r from-purple-500/20 to-blue-500/20 p-6 rounded-lg border border-purple-400/30",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDD10"}),(0,l.jsx)("h5",{className:"text-lg font-semibold text-white mb-2",children:s("results.answerAnalysis.signUpPrompt")||"See Your Detailed Answer Analysis"}),(0,l.jsx)("p",{className:"text-white/80 mb-4",children:s("results.answerAnalysis.description")||"Sign up to see which questions you got right or wrong, compare your answers with the correct ones, and track your progress over time."}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("button",{onClick:()=>window.location.href="/".concat(n,"/auth"),className:"w-full bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200",children:["\uD83D\uDCCA ",s("results.answerAnalysis.signUpButton")||"Sign Up for Free Analysis"]}),(0,l.jsxs)("p",{className:"text-xs text-white/60",children:["✨ ",s("results.answerAnalysis.features")||"Free forever • Track progress • 100% private"]})]})]})})]})]})]}),m&&!["math-speed","memory-power","general-knowledge"].includes(t.testId)&&(0,l.jsxs)("div",{className:"p-4 bg-white/5 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold mb-3 text-white/80",children:"\uD83D\uDD27 Technical Details"}),(0,l.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto text-xs",children:Object.entries(m).map(e=>{let[t,s]=e;return(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsxs)("span",{className:"text-white/60 font-mono w-24 flex-shrink-0",children:[t,":"]}),(0,l.jsx)("span",{className:"text-white/80 ml-2",children:String(s)})]},t)})})]})]})]},t.id)})(t))})]},i)})]})]})]}),A&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 rounded-lg p-6 max-w-md mx-4 shadow-2xl",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:s("results.confirmDelete.title")||"Confirm Delete"}),(0,l.jsx)("p",{className:"text-white/90 mb-6",children:s("results.confirmDelete.message")||"Are you sure you want to delete this test result? This action cannot be undone."}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("button",{onClick:()=>S(null),className:"flex-1 px-4 py-2 bg-gray-500/20 hover:bg-gray-500/30 text-white rounded-lg transition-all duration-200",children:s("results.confirmDelete.cancel")||"Cancel"}),(0,l.jsx)("button",{onClick:()=>{A&&R(A)},disabled:C.has(A||""),className:"flex-1 px-4 py-2 bg-red-500/80 hover:bg-red-600 disabled:bg-red-500/40 text-white rounded-lg transition-all duration-200 flex items-center justify-center gap-2",children:C.has(A||"")?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),s("results.confirmDelete.deleting")||"Deleting..."]}):(0,l.jsx)(l.Fragment,{children:s("results.confirmDelete.delete")||"Delete"})})]})]})})]}):(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-400 via-purple-500 to-purple-600 flex items-center justify-center p-8",children:(0,l.jsxs)("div",{className:"text-center p-8 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg shadow-lg",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold mb-4 text-white","data-translate":"results.signin_required_title",children:s("results.signin_required_title")||"Sign In Required"}),(0,l.jsx)("p",{className:"text-lg mb-8 text-white/90","data-translate":"results.signin_required_message",children:s("results.signin_required_message")||"You need to be signed in to view your test results."}),(0,l.jsx)(r(),{href:"/".concat(n),children:(0,l.jsx)("button",{className:"p-4 bg-white text-purple-600 font-bold rounded-lg hover:bg-purple-50 transition-all",children:s("results.go_to_homepage")||"Go to Homepage"})})]})})}},7200:(e,t,s)=>{"use strict";s.d(t,{A:()=>d,AuthProvider:()=>u});var l=s(5155),i=s(2115),o=s(5404),a=s(5695),n=s(6104),r=s(9086);let c=(0,i.createContext)(void 0),d=()=>{let e=(0,i.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},u=e=>{let{children:t}=e,[s,d]=(0,i.useState)(null),[u,p]=(0,i.useState)(!0),m=(0,a.useRouter)();return(0,i.useEffect)(()=>{let e=(0,o.hg)(n.j,async e=>{if(e){if(!e.providerData.some(e=>"google.com"===e.providerId)&&!e.emailVerified){console.log("\uD83D\uDEA8 AuthProvider: Blocking unverified email user:",e.email),console.log("\uD83D\uDCE7 Email verification status:",e.emailVerified),await (0,o.CI)(n.j),d(null),p(!1);return}console.log("✅ AuthProvider: User verified, proceeding:",e.email);try{await (0,r.sM)(e)}catch(e){console.warn("Firebase permissions issue - continuing without profile creation:",e)}if(!s&&e){let t=localStorage.getItem("auth_return_url"),s=localStorage.getItem("auth_return_context");if(t&&("feedback-360-test"===s||"couple-compatibility-test"===s)){localStorage.removeItem("auth_return_url"),localStorage.removeItem("auth_return_context"),console.log("User logged in, preparing greeting before ".concat(s));let l=t.match(/\/([a-z]{2})\//),i=l?l[1]:"en";setTimeout(()=>{m.push("/".concat(i,"/welcome?returnUrl=").concat(encodeURIComponent(t),"&context=").concat(s,"&userName=").concat(encodeURIComponent(e.displayName||e.email||"User")))},100)}}}d(e),p(!1)});return()=>e()},[s,m]),(0,l.jsx)(c.Provider,{value:{user:s,loading:u},children:!u&&t})}},7550:(e,t,s)=>{"use strict";s.d(t,{TranslationProvider:()=>c,B:()=>r});var l=s(5155),i=s(2115),o=s(5695);class a{async init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";console.log("TranslationEngine init called with defaultLang:",e),await this.loadLanguage("en");let t=e||localStorage.getItem("selectedLanguage")||navigator.language.split("-")[0]||"en";console.log("TranslationEngine using language:",t),"en"!==t&&await this.loadLanguage(t),this.currentLanguage=t,this.applyAll(),this.observeDOMChanges()}async loadLanguage(e){try{let t="compatibility-fix-".concat(Date.now(),"-").concat(Math.random()),s="/translations/".concat(e,".json?v=").concat(t);console.log("\uD83D\uDE80 CACHE-BUST Loading language ".concat(e," from:"),s);let l=await fetch(s,{cache:"no-cache",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});if(!l.ok)throw Error("Failed to load ".concat(e,".json: ").concat(l.status," ").concat(l.statusText));let i=await l.json();this.translations[e]=i,console.log("Successfully loaded ".concat(e," with ").concat(Object.keys(i).length," top-level keys")),i.results&&i.results.dimensions&&console.log("\uD83D\uDD0D COMPATIBILITY KEYS CHECK:",{compatibilityExists:!!i.results.dimensions.compatibility,personalityExists:!!i.results.dimensions.personality,compatibilityValue:i.results.dimensions.compatibility,personalityValue:i.results.dimensions.personality})}catch(t){console.error("Error loading language ".concat(e,":"),t)}}async setLanguage(e){await this.loadLanguage(e),this.currentLanguage=e,localStorage.setItem("selectedLanguage",e),this.applyAll()}t(e){if("results.strengths"===e&&console.log("\uD83D\uDE80 NEW TRANSLATION ENGINE LOADED - v6-COMPATIBILITY-FIX-2025-10-04"),!this.translations[this.currentLanguage]&&!this.translations.en)return console.warn("Translation files not loaded yet for key: ".concat(e)),e;let t=e.split(".").reduce((e,t)=>null==e?void 0:e[t],this.translations[this.currentLanguage]);if(void 0===t&&void 0===(t=e.split(".").reduce((e,t)=>null==e?void 0:e[t],this.translations.en))){var s,l,i,o,a,n,r,c,d,u,p,m,h,x;console.log("\uD83D\uDD0D Translation missing for key: ".concat(e," in language: ").concat(this.currentLanguage)),console.log("\uD83D\uDD0D Available languages:",Object.keys(this.translations)),console.log("\uD83D\uDD0D Translation objects:",{currentLangExists:!!this.translations[this.currentLanguage],englishExists:!!this.translations.en,currentLangKeys:this.translations[this.currentLanguage]?Object.keys(this.translations[this.currentLanguage]):"none",englishKeys:this.translations.en?Object.keys(this.translations.en):"none"}),console.log("\uD83D\uDD0D FULL RESULTS OBJECT:",null==(s=this.translations.en)?void 0:s.results),console.log("\uD83D\uDD0D STRENGTHS KEY:",null==(i=this.translations.en)||null==(l=i.results)?void 0:l.strengths),console.log("\uD83D\uDD0D STRENGTH PREFIX KEY:",null==(a=this.translations.en)||null==(o=a.results)?void 0:o.strengthPrefix),e.includes("results.dimensions")&&console.log("\uD83D\uDD0D DEBUG results.dimensions structure for key: ".concat(e,":"),{fullKey:e,keyParts:e.split("."),lastPart:e.split(".").pop(),currentLang:null==(n=this.translations[this.currentLanguage])?void 0:n.results,english:null==(r=this.translations.en)?void 0:r.results,dimensionsExist:!!(null==(d=this.translations.en)||null==(c=d.results)?void 0:c.dimensions),dimensionsKeys:Object.keys((null==(p=this.translations.en)||null==(u=p.results)?void 0:u.dimensions)||{}),specificKeyTest:null==(x=this.translations.en)||null==(h=x.results)||null==(m=h.dimensions)?void 0:m[e.split(".").pop()],fullLookupResult:e.split(".").reduce((e,t)=>null==e?void 0:e[t],this.translations.en)})}return t||e}getTranslations(){return this.translations[this.currentLanguage]||this.translations.en||{}}applyAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;e.querySelectorAll("[data-translate]").forEach(e=>{let t=e.getAttribute("data-translate");e.textContent=this.t(t)})}observeDOMChanges(){new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{1===e.nodeType&&this.applyAll(e)})})}).observe(document.body,{childList:!0,subtree:!0})}constructor(){this.translations={},this.currentLanguage="en"}}let n=(0,i.createContext)(null),r=()=>{let e=(0,i.useContext)(n);if(!e)throw Error("useTranslation must be used within a TranslationProvider");return{t:t=>{let s=e.t(t);return s===t&&console.warn("Translation missing for key: ".concat(t," in language: ").concat(e.currentLanguage)),s},setLanguage:e.setLanguage.bind(e),currentLanguage:e.currentLanguage,translations:e.getTranslations()}},c=e=>{let{children:t}=e,[s,r]=(0,i.useState)(null),[c,d]=(0,i.useState)(!1),[u,p]=(0,i.useState)(!1),[,m]=(0,i.useState)({}),h=(0,o.usePathname)();return((0,i.useEffect)(()=>{p(!0);let e=async()=>{let e=new a,t=h.split("/")[1],s=["en","ko","es","fr","de","it","ja","pt","zh"].includes(t)?t:"en";console.log("TranslationProvider initializing with language:",s,"from pathname:",h);let l=e.setLanguage.bind(e);e.setLanguage=async e=>{console.log("Changing language to:",e),await l(e),m({})},await e.init(s),console.log("Translation engine initialized. Current language:",e.currentLanguage),console.log("Available translations for current language:",Object.keys(e.translations[e.currentLanguage]||{})),console.log("Test translation - tests.page_title:",e.t("tests.page_title")),console.log("Test results.dimensions translation - E:",e.t("results.dimensions.E")),console.log("Test results.dimensions translation - 8:",e.t("results.dimensions.8")),console.log("Test results.dimensions translation - Self-Awareness:",e.t("results.dimensions.Self-Awareness")),r(e),d(!0)};d(!1),e()},[h]),u)?s&&c?(0,l.jsx)(n.Provider,{value:s,children:t}):(0,l.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,l.jsx)("div",{className:"animate-pulse text-gray-500",children:"Loading translations..."})}):null}},8243:(e,t,s)=>{Promise.resolve().then(s.bind(s,4818))}},e=>{e.O(0,[135,965,155,761,244,86,722,441,964,358],()=>e(e.s=8243)),_N_E=e.O()}]);