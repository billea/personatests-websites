(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[450],{773:(e,t,n)=>{Promise.resolve().then(n.bind(n,4615)),Promise.resolve().then(n.bind(n,7200)),Promise.resolve().then(n.bind(n,7550))},4615:(e,t,n)=>{"use strict";n.d(t,{default:()=>h});var s=n(5155),r=n(6874),o=n.n(r),a=n(5695),l=n(7550),i=n(7200),c=n(5404),u=n(6104),d=n(2115),g=n(9086);function h(){var e;let t=(0,a.usePathname)(),n=(0,a.useRouter)(),{t:r,currentLanguage:h}=(0,l.B)(),{user:p,loading:m}=(0,i.A)(),[x,f]=(0,d.useState)(!1),[v,y]=(0,d.useState)(!1),[b,j]=(0,d.useState)([]),[k,N]=(0,d.useState)(!1),w=t.split("/")[1]||"en";(0,d.useEffect)(()=>{(async()=>{try{let e=await (0,g.rc)();j(e)}catch(e){console.error("Error loading enabled languages:",e),j([{code:"en",name:"English",flag:"\uD83C\uDDFA\uD83C\uDDF8",isEnabled:!0,isDefault:!0,completionPercentage:100,lastUpdated:new Date}])}})()},[]),(0,d.useEffect)(()=>{(async()=>{if(p&&!m)try{let e=await (0,g.N6)(p.uid);N(e)}catch(e){console.error("Error checking admin role:",e),N(!1)}else N(!1)})()},[p,m]);let L=async()=>{try{await (0,c.CI)(u.j),console.log("User signed out successfully"),n.push("/".concat(w))}catch(e){console.error("Error signing out:",e)}},E=b.find(e=>e.code===h)||b.find(e=>e.isDefault)||b[0]||{code:"en",name:"English",flag:"\uD83C\uDDFA\uD83C\uDDF8"};return m?null:(0,s.jsxs)("header",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-50 shadow-sm",children:[(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)(o(),{href:"/".concat(w),className:"text-xl font-bold text-purple-600 hover:text-purple-700 transition-colors flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"✨"}),"ko"===h?"성격테스트":"PersonaTests"]})}),(0,s.jsxs)("div",{className:"hidden md:flex items-center space-x-8",children:[(0,s.jsx)(o(),{href:"/".concat(w),className:"text-sm font-medium transition-colors px-3 py-2 rounded-lg ".concat(t==="/".concat(w)||"/"===t?"text-purple-600 bg-purple-50":"text-gray-600 hover:text-purple-600 hover:bg-gray-50"),children:"ko"===h?"홈":"Home"}),(0,s.jsx)(o(),{href:"/".concat(w,"/tests"),className:"text-sm font-medium transition-colors px-3 py-2 rounded-lg ".concat(t.includes("/tests")?"text-purple-600 bg-purple-50":"text-gray-600 hover:text-purple-600 hover:bg-gray-50"),children:"ko"===h?"테스트":"Tests"}),(0,s.jsx)(o(),{href:"/".concat(w,"/results"),className:"text-sm font-medium transition-colors px-3 py-2 rounded-lg ".concat(t.includes("/results")?"text-purple-600 bg-purple-50":"text-gray-600 hover:text-purple-600 hover:bg-gray-50"),children:"ko"===h?"결과":"Results"}),(0,s.jsx)(o(),{href:"/".concat(w,"/contact"),className:"text-sm font-medium transition-colors px-3 py-2 rounded-lg ".concat(t.includes("/contact")?"text-purple-600 bg-purple-50":"text-gray-600 hover:text-purple-600 hover:bg-gray-50"),children:"ko"===h?"문의하기":"Contact"}),p&&(0,s.jsx)(o(),{href:"/".concat(w,"/profile"),className:"text-sm font-medium transition-colors px-3 py-2 rounded-lg ".concat(t.includes("/profile")?"text-purple-600 bg-purple-50":"text-gray-600 hover:text-purple-600 hover:bg-gray-50"),children:"ko"===h?"프로필":"Profile"}),p&&k&&(0,s.jsxs)(o(),{href:"/".concat(w,"/admin"),className:"text-sm font-medium transition-colors px-3 py-2 rounded-lg border-2 border-orange-200 ".concat(t.includes("/admin")?"text-orange-700 bg-orange-50 border-orange-300":"text-orange-600 hover:text-orange-700 hover:bg-orange-50 hover:border-orange-300"),children:["⚙️ ","ko"===h?"관리":"Admin"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>y(!v),className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-600 hover:text-purple-600 hover:bg-gray-50 rounded-lg transition-colors",children:[(0,s.jsx)("span",{children:E.flag}),(0,s.jsx)("span",{className:"hidden sm:block",children:E.code.toUpperCase()}),(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),v&&(0,s.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:b.map(e=>(0,s.jsxs)("button",{onClick:()=>{var t;return t=e.code,void(n.push("/".concat(t)),y(!1))},className:"w-full text-left px-4 py-2 text-sm hover:bg-purple-50 flex items-center space-x-3 ".concat(h===e.code?"text-purple-600 bg-purple-50":"text-gray-700"),children:[(0,s.jsx)("span",{children:e.flag}),(0,s.jsx)("span",{children:e.name})]},e.code))})]}),p?(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("div",{className:"hidden sm:block text-right",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"ko"===h?"안녕하세요!":"Hello!"}),(0,s.jsx)("div",{className:"text-sm font-semibold text-gray-800",children:p.displayName||(null==(e=p.email)?void 0:e.split("@")[0])||"User"})]}),(0,s.jsxs)("button",{onClick:L,className:"flex items-center space-x-2 bg-purple-50 hover:bg-purple-100 px-3 py-2 rounded-full transition-colors group",title:"ko"===h?"로그아웃":"Sign out",children:[p.photoURL?(0,s.jsx)("img",{src:p.photoURL,alt:"Profile",className:"w-8 h-8 rounded-full"}):(0,s.jsx)("div",{className:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-white text-sm font-semibold",children:(p.displayName||p.email||"U")[0].toUpperCase()}),(0,s.jsx)("span",{className:"hidden sm:block text-xs text-gray-500 group-hover:text-purple-600",children:"ko"===h?"로그아웃":"Sign out"})]})]}):(0,s.jsx)(o(),{href:"/".concat(w,"/auth"),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"ko"===h?"로그인":"Sign In"}),(0,s.jsx)("button",{onClick:()=>f(!x),className:"md:hidden p-2 text-gray-600 hover:text-purple-600 hover:bg-gray-50 rounded-lg transition-colors",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x?(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),x&&(0,s.jsx)("div",{className:"md:hidden border-t border-gray-200 py-4",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,s.jsx)(o(),{href:"/".concat(w),onClick:()=>f(!1),className:"px-4 py-2 text-sm font-medium rounded-lg transition-colors ".concat(t==="/".concat(w)||"/"===t?"text-purple-600 bg-purple-50":"text-gray-600 hover:text-purple-600 hover:bg-gray-50"),children:"ko"===h?"홈":"Home"}),(0,s.jsx)(o(),{href:"/".concat(w,"/tests"),onClick:()=>f(!1),className:"px-4 py-2 text-sm font-medium rounded-lg transition-colors ".concat(t.includes("/tests")?"text-purple-600 bg-purple-50":"text-gray-600 hover:text-purple-600 hover:bg-gray-50"),children:"ko"===h?"테스트":"Tests"}),(0,s.jsx)(o(),{href:"/".concat(w,"/results"),onClick:()=>f(!1),className:"px-4 py-2 text-sm font-medium rounded-lg transition-colors ".concat(t.includes("/results")?"text-purple-600 bg-purple-50":"text-gray-600 hover:text-purple-600 hover:bg-gray-50"),children:"ko"===h?"결과":"Results"}),(0,s.jsx)(o(),{href:"/".concat(w,"/contact"),onClick:()=>f(!1),className:"px-4 py-2 text-sm font-medium rounded-lg transition-colors ".concat(t.includes("/contact")?"text-purple-600 bg-purple-50":"text-gray-600 hover:text-purple-600 hover:bg-gray-50"),children:"ko"===h?"문의하기":"Contact"}),p&&(0,s.jsx)(o(),{href:"/".concat(w,"/profile"),onClick:()=>f(!1),className:"px-4 py-2 text-sm font-medium rounded-lg transition-colors ".concat(t.includes("/profile")?"text-purple-600 bg-purple-50":"text-gray-600 hover:text-purple-600 hover:bg-gray-50"),children:"ko"===h?"프로필":"Profile"}),p&&k&&(0,s.jsxs)(o(),{href:"/".concat(w,"/admin"),onClick:()=>f(!1),className:"px-4 py-2 text-sm font-medium rounded-lg transition-colors border-2 border-orange-200 ".concat(t.includes("/admin")?"text-orange-700 bg-orange-50 border-orange-300":"text-orange-600 hover:text-orange-700 hover:bg-orange-50 hover:border-orange-300"),children:["⚙️ ","ko"===h?"관리":"Admin"]})]})})]}),v&&(0,s.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>y(!1)})]})}},7200:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,AuthProvider:()=>d});var s=n(5155),r=n(2115),o=n(5404),a=n(5695),l=n(6104),i=n(9086);let c=(0,r.createContext)(void 0),u=()=>{let e=(0,r.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},d=e=>{let{children:t}=e,[n,u]=(0,r.useState)(null),[d,g]=(0,r.useState)(!0),h=(0,a.useRouter)();return(0,r.useEffect)(()=>{let e=(0,o.hg)(l.j,async e=>{if(e){if(!e.providerData.some(e=>"google.com"===e.providerId)&&!e.emailVerified){console.log("\uD83D\uDEA8 AuthProvider: Blocking unverified email user:",e.email),console.log("\uD83D\uDCE7 Email verification status:",e.emailVerified),await (0,o.CI)(l.j),u(null),g(!1);return}console.log("✅ AuthProvider: User verified, proceeding:",e.email);try{await (0,i.sM)(e)}catch(e){console.warn("Firebase permissions issue - continuing without profile creation:",e)}if(!n&&e){let t=localStorage.getItem("auth_return_url"),n=localStorage.getItem("auth_return_context");if(t&&("feedback-360-test"===n||"couple-compatibility-test"===n)){localStorage.removeItem("auth_return_url"),localStorage.removeItem("auth_return_context"),console.log("User logged in, preparing greeting before ".concat(n));let s=t.match(/\/([a-z]{2})\//),r=s?s[1]:"en";setTimeout(()=>{h.push("/".concat(r,"/welcome?returnUrl=").concat(encodeURIComponent(t),"&context=").concat(n,"&userName=").concat(encodeURIComponent(e.displayName||e.email||"User")))},100)}}}u(e),g(!1)});return()=>e()},[n,h]),(0,s.jsx)(c.Provider,{value:{user:n,loading:d},children:!d&&t})}},7550:(e,t,n)=>{"use strict";n.d(t,{TranslationProvider:()=>c,B:()=>i});var s=n(5155),r=n(2115),o=n(5695);class a{async init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";console.log("TranslationEngine init called with defaultLang:",e),await this.loadLanguage("en");let t=e||localStorage.getItem("selectedLanguage")||navigator.language.split("-")[0]||"en";console.log("TranslationEngine using language:",t),"en"!==t&&await this.loadLanguage(t),this.currentLanguage=t,this.applyAll(),this.observeDOMChanges()}async loadLanguage(e){try{let t="/translations/".concat(e,".json?v=").concat(new Date().getTime());console.log("Loading language ".concat(e," from:"),t);let n=await fetch(t,{cache:"no-cache",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});if(!n.ok)throw Error("Failed to load ".concat(e,".json: ").concat(n.status," ").concat(n.statusText));let s=await n.json();this.translations[e]=s,console.log("Successfully loaded ".concat(e," with ").concat(Object.keys(s).length," top-level keys"))}catch(t){console.error("Error loading language ".concat(e,":"),t)}}async setLanguage(e){await this.loadLanguage(e),this.currentLanguage=e,localStorage.setItem("selectedLanguage",e),this.applyAll()}t(e){if("results.strengths"===e&&console.log("\uD83D\uDE80 NEW TRANSLATION ENGINE LOADED - v5-FINAL-FIX-2025-10-01"),!this.translations[this.currentLanguage]&&!this.translations.en)return console.warn("Translation files not loaded yet for key: ".concat(e)),e;let t=e.split(".").reduce((e,t)=>null==e?void 0:e[t],this.translations[this.currentLanguage]);if(void 0===t&&void 0===(t=e.split(".").reduce((e,t)=>null==e?void 0:e[t],this.translations.en))){var n,s,r,o,a,l,i,c,u,d,g,h,p,m;console.log("\uD83D\uDD0D Translation missing for key: ".concat(e," in language: ").concat(this.currentLanguage)),console.log("\uD83D\uDD0D Available languages:",Object.keys(this.translations)),console.log("\uD83D\uDD0D Translation objects:",{currentLangExists:!!this.translations[this.currentLanguage],englishExists:!!this.translations.en,currentLangKeys:this.translations[this.currentLanguage]?Object.keys(this.translations[this.currentLanguage]):"none",englishKeys:this.translations.en?Object.keys(this.translations.en):"none"}),console.log("\uD83D\uDD0D FULL RESULTS OBJECT:",null==(n=this.translations.en)?void 0:n.results),console.log("\uD83D\uDD0D STRENGTHS KEY:",null==(r=this.translations.en)||null==(s=r.results)?void 0:s.strengths),console.log("\uD83D\uDD0D STRENGTH PREFIX KEY:",null==(a=this.translations.en)||null==(o=a.results)?void 0:o.strengthPrefix),e.includes("results.dimensions")&&console.log("\uD83D\uDD0D DEBUG results structure:",{currentLang:null==(l=this.translations[this.currentLanguage])?void 0:l.results,english:null==(i=this.translations.en)?void 0:i.results,dimensionsExist:!!(null==(u=this.translations.en)||null==(c=u.results)?void 0:c.dimensions),dimensionsKeys:Object.keys((null==(g=this.translations.en)||null==(d=g.results)?void 0:d.dimensions)||{}),specificKeyTest:null==(m=this.translations.en)||null==(p=m.results)||null==(h=p.dimensions)?void 0:h[e.split(".").pop()]})}return t||e}getTranslations(){return this.translations[this.currentLanguage]||this.translations.en||{}}applyAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;e.querySelectorAll("[data-translate]").forEach(e=>{let t=e.getAttribute("data-translate");e.textContent=this.t(t)})}observeDOMChanges(){new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{1===e.nodeType&&this.applyAll(e)})})}).observe(document.body,{childList:!0,subtree:!0})}constructor(){this.translations={},this.currentLanguage="en"}}let l=(0,r.createContext)(null),i=()=>{let e=(0,r.useContext)(l);if(!e)throw Error("useTranslation must be used within a TranslationProvider");return{t:t=>{let n=e.t(t);return n===t&&console.warn("Translation missing for key: ".concat(t," in language: ").concat(e.currentLanguage)),n},setLanguage:e.setLanguage.bind(e),currentLanguage:e.currentLanguage,translations:e.getTranslations()}},c=e=>{let{children:t}=e,[n,i]=(0,r.useState)(null),[c,u]=(0,r.useState)(!1),[d,g]=(0,r.useState)(!1),[,h]=(0,r.useState)({}),p=(0,o.usePathname)();return((0,r.useEffect)(()=>{g(!0);let e=async()=>{let e=new a,t=p.split("/")[1],n=["en","ko","es","fr","de","it","ja","pt","zh"].includes(t)?t:"en";console.log("TranslationProvider initializing with language:",n,"from pathname:",p);let s=e.setLanguage.bind(e);e.setLanguage=async e=>{console.log("Changing language to:",e),await s(e),h({})},await e.init(n),console.log("Translation engine initialized. Current language:",e.currentLanguage),console.log("Available translations for current language:",Object.keys(e.translations[e.currentLanguage]||{})),console.log("Test translation - tests.page_title:",e.t("tests.page_title")),console.log("Test results.dimensions translation - E:",e.t("results.dimensions.E")),console.log("Test results.dimensions translation - 8:",e.t("results.dimensions.8")),console.log("Test results.dimensions translation - Self-Awareness:",e.t("results.dimensions.Self-Awareness")),i(e),u(!0)};u(!1),e()},[p]),d)?n&&c?(0,s.jsx)(l.Provider,{value:n,children:t}):(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"animate-pulse text-gray-500",children:"Loading translations..."})}):null}}},e=>{e.O(0,[135,965,155,761,244,86,441,964,358],()=>e(e.s=773)),_N_E=e.O()}]);