(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[943],{2045:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(5155),l=s(2115),i=s(7200),a=s(7550),n=s(5695),o=s(9086),d=s(3722),c=s(6874),m=s.n(c);function x(){var e;let{user:t,loading:s}=(0,i.A)(),{t:c,currentLanguage:x}=(0,a.B)(),h=(0,n.useRouter)(),[u,p]=(0,l.useState)([]),[b,g]=(0,l.useState)(!0),[j,f]=(0,l.useState)("overview");(0,l.useEffect)(()=>{if(!s&&!t)return void h.push("/".concat(x,"/auth?returnUrl=/").concat(x,"/profile"));t&&N()},[t,s,x,h]);let N=async()=>{if(t)try{let e=await (0,o.iZ)(t.uid);p(e)}catch(e){console.error("Error loading user data:",e)}finally{g(!1)}},w=e=>e?(e.toDate?e.toDate():new Date(e)).toLocaleDateString(x,{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown date",v=e=>{let t=(0,d.tb)(e);return t?c(t.title_key)||t.title_key:e};if(s||b)return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-400 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-white/80",children:"Loading your profile..."})]})});if(!t)return null;let y=()=>{let e=u.filter(e=>"mbti"===e.testId);if(e.length>0){var t;return(null==(t=e[0].resultPayload)?void 0:t.type)||"Unknown"}return null},k=()=>{let e=u.filter(e=>"big-five"===e.testId);if(e.length>0){var t;return(null==(t=e[0].resultPayload)?void 0:t.traits)||[]}return[]},D=()=>Math.round(u.length/8*100),C=()=>u.sort((e,t)=>{var s,r;let l=(null==(s=e.createdAt)?void 0:s.toDate)?e.createdAt.toDate().getTime():0;return((null==(r=t.createdAt)?void 0:r.toDate)?t.createdAt.toDate().getTime():0)-l}).slice(0,3);return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl border border-white/20 p-8 mb-8",children:(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row items-center gap-6",children:[(0,r.jsxs)("div",{className:"relative",children:[t.photoURL?(0,r.jsx)("img",{src:t.photoURL,alt:"Profile",className:"w-32 h-32 rounded-full border-4 border-white/30"}):(0,r.jsx)("div",{className:"w-32 h-32 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center text-white text-4xl font-bold border-4 border-white/30",children:(t.displayName||t.email||"U")[0].toUpperCase()}),(0,r.jsx)("div",{className:"absolute -bottom-2 -right-2 bg-green-500 rounded-full w-8 h-8 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white text-sm",children:"✓"})})]}),(0,r.jsxs)("div",{className:"flex-1 text-center lg:text-left",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:t.displayName||(null==(e=t.email)?void 0:e.split("@")[0])||"User"}),(0,r.jsx)("p",{className:"text-white/80 text-lg mb-3",children:t.email}),(0,r.jsxs)("div",{className:"flex flex-wrap justify-center lg:justify-start gap-4 text-sm text-white/60",children:[(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{children:"\uD83D\uDCC5"}),"ko"===x?"가입일: ":"Joined: ",t.metadata.creationTime?new Date(t.metadata.creationTime).toLocaleDateString(x,{year:"numeric",month:"short"}):"Unknown"]}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{children:"\uD83C\uDFC6"}),u.length," ","ko"===x?"테스트 완료":"tests completed"]}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{children:"\uD83D\uDCC8"}),D(),"% ","ko"===x?"완료율":"completion"]})]})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(m(),{href:"/".concat(x,"/tests"),className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors",children:"ko"===x?"새 테스트":"New Test"}),(0,r.jsx)(m(),{href:"/".concat(x,"/results"),className:"px-6 py-3 bg-white/20 hover:bg-white/30 text-white rounded-lg font-medium transition-colors backdrop-blur-sm",children:"ko"===x?"결과 보기":"View Results"})]})]})}),(0,r.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl border border-white/20 mb-8",children:(0,r.jsx)("div",{className:"flex flex-wrap",children:[{id:"overview",label:"ko"===x?"개요":"Overview",icon:"\uD83C\uDFE0"},{id:"tests",label:"ko"===x?"테스트":"Tests",icon:"\uD83D\uDCDD"},{id:"insights",label:"ko"===x?"통찰":"Insights",icon:"\uD83D\uDCA1"},{id:"settings",label:"ko"===x?"설정":"Settings",icon:"⚙️"}].map(e=>(0,r.jsxs)("button",{onClick:()=>f(e.id),className:"flex-1 flex items-center justify-center gap-2 px-6 py-4 font-medium transition-colors ".concat(j===e.id?"bg-white/20 text-white border-b-2 border-purple-400":"text-white/70 hover:text-white hover:bg-white/10"),children:[(0,r.jsx)("span",{className:"text-lg",children:e.icon}),e.label]},e.id))})}),(()=>{switch(j){case"overview":return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-purple-500/10 to-blue-500/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83E\uDDE0"}),"ko"===x?"성격 개요":"Personality Overview"]}),y()?(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-medium text-white/90 mb-2",children:"ko"===x?"주요 성격 유형":"Primary Type"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-purple-300",children:y()})]}),(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-medium text-white/90 mb-2",children:"ko"===x?"완료율":"Completion Rate"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-blue-300",children:[D(),"%"]})]})]}):(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:"\uD83C\uDFAF"}),(0,r.jsx)("p",{className:"text-white/80 mb-4",children:"ko"===x?"아직 성격 테스트를 완료하지 않았습니다":"No personality tests completed yet"}),(0,r.jsx)(m(),{href:"/".concat(x,"/tests"),className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"ko"===x?"첫 테스트 시작":"Take Your First Test"})]})]}),(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCC8"}),"ko"===x?"최근 활동":"Recent Activity"]}),C().length>0?(0,r.jsx)("div",{className:"space-y-3",children:C().map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white/5 rounded-lg p-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-white",children:v(e.testId)}),(0,r.jsx)("p",{className:"text-sm text-white/60",children:w(e.createdAt)})]}),(0,r.jsx)(m(),{href:"/".concat(x,"/results"),className:"text-purple-300 hover:text-purple-200 text-sm font-medium",children:"ko"===x?"보기":"View"})]},e.id))}):(0,r.jsx)("p",{className:"text-white/60 text-center py-4",children:"ko"===x?"활동 기록이 없습니다":"No recent activity"})]})]});case"tests":return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-green-500/20 to-emerald-500/20 backdrop-blur-sm rounded-lg p-4 border border-white/20",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-300",children:u.length}),(0,r.jsx)("div",{className:"text-sm text-white/80",children:"ko"===x?"완료된 테스트":"Tests Completed"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-500/20 to-cyan-500/20 backdrop-blur-sm rounded-lg p-4 border border-white/20",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-blue-300",children:[D(),"%"]}),(0,r.jsx)("div",{className:"text-sm text-white/80",children:"ko"===x?"완료율":"Completion Rate"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-purple-500/20 to-pink-500/20 backdrop-blur-sm rounded-lg p-4 border border-white/20",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-purple-300",children:u.length>0?Math.round(u.length/Math.max(1,Math.ceil((Date.now()-new Date(t.metadata.creationTime||Date.now()).getTime())/2592e6))):0}),(0,r.jsx)("div",{className:"text-sm text-white/80",children:"ko"===x?"월간 평균":"Monthly Average"})]})]}),(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"ko"===x?"테스트 기록":"Test History"}),u.length>0?(0,r.jsx)("div",{className:"space-y-3",children:u.map(e=>{var t;return(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white/5 rounded-lg p-4 hover:bg-white/10 transition-colors",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"font-medium text-white",children:v(e.testId)}),(0,r.jsx)("p",{className:"text-sm text-white/60 mt-1",children:w(e.createdAt)}),(null==(t=e.resultPayload)?void 0:t.type)&&(0,r.jsx)("span",{className:"inline-block mt-2 px-2 py-1 bg-purple-500/30 text-purple-200 text-xs rounded-full",children:e.resultPayload.type})]}),(0,r.jsx)(m(),{href:"/".concat(x,"/results"),className:"text-purple-300 hover:text-purple-200 font-medium",children:"ko"===x?"결과 보기":"View Result"})]},e.id)})}):(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCDD"}),(0,r.jsx)("p",{className:"text-white/60 mb-4",children:"ko"===x?"아직 완료한 테스트가 없습니다":"No tests completed yet"}),(0,r.jsx)(m(),{href:"/".concat(x,"/tests"),className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"ko"===x?"테스트 시작하기":"Start Testing"})]})]})]});case"insights":return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCA1"}),"ko"===x?"성격 통찰":"Personality Insights"]}),y()?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-purple-500/20 to-blue-500/20 rounded-lg p-4",children:[(0,r.jsxs)("h4",{className:"font-semibold text-white mb-2",children:["ko"===x?"주요 성격 유형: ":"Primary Type: ",(0,r.jsx)("span",{className:"text-purple-300",children:y()})]}),(0,r.jsx)("p",{className:"text-white/80 text-sm",children:"ko"===x?"MBTI 테스트 결과를 기반으로 한 당신의 주요 성격 유형입니다.":"Your primary personality type based on MBTI test results."})]}),k().length>0&&(0,r.jsxs)("div",{className:"bg-gradient-to-r from-green-500/20 to-teal-500/20 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-white mb-2",children:"ko"===x?"성격 특성":"Personality Traits"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:k().map((e,t)=>(0,r.jsx)("span",{className:"px-3 py-1 bg-white/20 text-white text-sm rounded-full",children:e},t))})]})]}):(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDD2E"}),(0,r.jsx)("p",{className:"text-white/60 mb-4",children:"ko"===x?"통찰을 얻으려면 더 많은 테스트를 완료하세요":"Complete more tests to unlock personality insights"}),(0,r.jsx)(m(),{href:"/".concat(x,"/tests"),className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"ko"===x?"테스트 하러가기":"Take Tests"})]})]}),(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83C\uDF31"}),"ko"===x?"성장 제안":"Growth Recommendations"]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"bg-white/5 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-medium text-white mb-2",children:"ko"===x?"더 많은 테스트 완료하기":"Complete More Tests"}),(0,r.jsx)("p",{className:"text-white/70 text-sm",children:"ko"===x?"다양한 테스트를 통해 자신에 대한 더 깊은 이해를 얻으세요.":"Gain deeper self-understanding through various personality assessments."})]}),(0,r.jsxs)("div",{className:"bg-white/5 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-medium text-white mb-2",children:"ko"===x?"360\xb0 피드백 받기":"Get 360\xb0 Feedback"}),(0,r.jsx)("p",{className:"text-white/70 text-sm",children:"ko"===x?"친구들과 동료들로부터 피드백을 받아보세요.":"Invite friends and colleagues to provide feedback about you."})]})]})]})]});case"settings":return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDC64"}),"ko"===x?"계정 정보":"Account Information"]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"flex items-center justify-between py-3 border-b border-white/10",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-white",children:"ko"===x?"이메일":"Email"}),(0,r.jsx)("p",{className:"text-white/60 text-sm",children:t.email})]})}),(0,r.jsx)("div",{className:"flex items-center justify-between py-3 border-b border-white/10",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-white",children:"ko"===x?"가입일":"Member Since"}),(0,r.jsx)("p",{className:"text-white/60 text-sm",children:t.metadata.creationTime?new Date(t.metadata.creationTime).toLocaleDateString(x,{year:"numeric",month:"long",day:"numeric"}):"Unknown"})]})})]})]}),(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD12"}),"ko"===x?"데이터 및 개인정보":"Data & Privacy"]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("button",{className:"w-full text-left bg-white/5 hover:bg-white/10 rounded-lg p-4 transition-colors",children:[(0,r.jsx)("h4",{className:"font-medium text-white mb-1",children:"ko"===x?"데이터 내보내기":"Export My Data"}),(0,r.jsx)("p",{className:"text-white/60 text-sm",children:"ko"===x?"테스트 결과와 개인 데이터를 다운로드하세요":"Download your test results and personal data"})]}),(0,r.jsxs)("button",{className:"w-full text-left bg-white/5 hover:bg-white/10 rounded-lg p-4 transition-colors",children:[(0,r.jsx)("h4",{className:"font-medium text-white mb-1",children:"ko"===x?"개인정보 설정":"Privacy Settings"}),(0,r.jsx)("p",{className:"text-white/60 text-sm",children:"ko"===x?"프로필 공개 범위를 관리하세요":"Manage your profile visibility and data sharing"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:"⚡"}),"ko"===x?"빠른 작업":"Quick Actions"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)(m(),{href:"/".concat(x,"/tests"),className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 rounded-lg p-4 transition-colors text-center",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:"\uD83E\uDDE0"}),(0,r.jsx)("p",{className:"font-medium text-white",children:"ko"===x?"새 테스트 시작":"Take New Test"})]}),(0,r.jsxs)(m(),{href:"/".concat(x,"/results"),className:"bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 rounded-lg p-4 transition-colors text-center",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDCCA"}),(0,r.jsx)("p",{className:"font-medium text-white",children:"ko"===x?"결과 보기":"View Results"})]})]})]})]});default:return null}})()]})})}},4628:(e,t,s)=>{Promise.resolve().then(s.bind(s,2045))},7200:(e,t,s)=>{"use strict";s.d(t,{A:()=>c,AuthProvider:()=>m});var r=s(5155),l=s(2115),i=s(5404),a=s(5695),n=s(6104),o=s(9086);let d=(0,l.createContext)(void 0),c=()=>{let e=(0,l.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},m=e=>{let{children:t}=e,[s,c]=(0,l.useState)(null),[m,x]=(0,l.useState)(!0),h=(0,a.useRouter)();return(0,l.useEffect)(()=>{let e=(0,i.hg)(n.j,async e=>{if(e){if(!e.providerData.some(e=>"google.com"===e.providerId)&&!e.emailVerified){console.log("\uD83D\uDEA8 AuthProvider: Blocking unverified email user:",e.email),console.log("\uD83D\uDCE7 Email verification status:",e.emailVerified),await (0,i.CI)(n.j),c(null),x(!1);return}console.log("✅ AuthProvider: User verified, proceeding:",e.email);try{await (0,o.sM)(e)}catch(e){console.warn("Firebase permissions issue - continuing without profile creation:",e)}if(!s&&e){let t=localStorage.getItem("auth_return_url"),s=localStorage.getItem("auth_return_context");if(t&&("feedback-360-test"===s||"couple-compatibility-test"===s)){localStorage.removeItem("auth_return_url"),localStorage.removeItem("auth_return_context"),console.log("User logged in, preparing greeting before ".concat(s));let r=t.match(/\/([a-z]{2})\//),l=r?r[1]:"en";setTimeout(()=>{h.push("/".concat(l,"/welcome?returnUrl=").concat(encodeURIComponent(t),"&context=").concat(s,"&userName=").concat(encodeURIComponent(e.displayName||e.email||"User")))},100)}}}c(e),x(!1)});return()=>e()},[s,h]),(0,r.jsx)(d.Provider,{value:{user:s,loading:m},children:!m&&t})}}},e=>{e.O(0,[135,965,155,761,244,550,86,722,441,964,358],()=>e(e.s=4628)),_N_E=e.O()}]);